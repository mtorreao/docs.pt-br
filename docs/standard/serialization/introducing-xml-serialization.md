---
title: Detalhes da serialização de XML
description: A serialização converte um objeto em um formulário que pode ser transportado. Este artigo fornece uma visão geral da serialização XML e da classe XmlSerializer.
ms.date: 12/09/2020
dev_langs:
- csharp
- vb
helpviewer_keywords:
- XML serialization, about XML serialization
- ICollection interface, serializing
- XmlSerializer class, serializing
- serialization, about serialization
- DataSet class, serializing
- XML Schema, serializing
ms.assetid: 8c63200d-db63-4a03-a93d-21641623df62
ms.openlocfilehash: b1b5a90acce55ac7f58c1bde02fee713991dde80
ms.sourcegitcommit: 9b877e160c326577e8aa5ead22a937110d80fa44
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/11/2020
ms.locfileid: "97110150"
---
# <a name="xml-serialization"></a><span data-ttu-id="96453-104">Serialização XML</span><span class="sxs-lookup"><span data-stu-id="96453-104">XML serialization</span></span>

<span data-ttu-id="96453-105">A serialização é o processo de conversão de um objeto em um formulário que possa ser prontamente transportado.</span><span class="sxs-lookup"><span data-stu-id="96453-105">Serialization is the process of converting an object into a form that can be readily transported.</span></span> <span data-ttu-id="96453-106">Por exemplo, você pode serializar um objeto e transportá-lo pela Internet usando HTTP entre um cliente e um servidor.</span><span class="sxs-lookup"><span data-stu-id="96453-106">For example, you can serialize an object and transport it over the Internet using HTTP between a client and a server.</span></span> <span data-ttu-id="96453-107">Na outra extremidade, a desserialização reconstrói o objeto a partir do fluxo.</span><span class="sxs-lookup"><span data-stu-id="96453-107">On the other end, deserialization reconstructs the object from the stream.</span></span>

 <span data-ttu-id="96453-108">A serialização XML serializa apenas os valores de propriedades e de campos públicos de um objeto em um fluxo XML.</span><span class="sxs-lookup"><span data-stu-id="96453-108">XML serialization serializes only the public fields and property values of an object into an XML stream.</span></span> <span data-ttu-id="96453-109">A serialização XML não inclui informações de tipo.</span><span class="sxs-lookup"><span data-stu-id="96453-109">XML serialization does not include type information.</span></span> <span data-ttu-id="96453-110">Por exemplo, se você tiver um objeto **Book** no namespace **Library**, não haverá garantia de que ele será desserializado em um objeto do mesmo tipo.</span><span class="sxs-lookup"><span data-stu-id="96453-110">For example, if you have a **Book** object that exists in the **Library** namespace, there is no guarantee that it is deserialized into an object of the same type.</span></span>

> [!NOTE]
> <span data-ttu-id="96453-111">A serialização XML não converte métodos, indexadores, campos privados nem propriedades somente leitura (exceto coleções somente leitura).</span><span class="sxs-lookup"><span data-stu-id="96453-111">XML serialization does not convert methods, indexers, private fields, or read-only properties (except read-only collections).</span></span> <span data-ttu-id="96453-112">Para serializar todos os campos e propriedades (públicos e privados) de um objeto, use <xref:System.Runtime.Serialization.DataContractSerializer>, em vez da serialização XML.</span><span class="sxs-lookup"><span data-stu-id="96453-112">To serialize all an object's fields and properties, both public and private, use the <xref:System.Runtime.Serialization.DataContractSerializer> instead of XML serialization.</span></span>

 <span data-ttu-id="96453-113">A classe central na serialização XML é a classe <xref:System.Xml.Serialization.XmlSerializer> e os métodos mais importantes nessa classe são os métodos **Serialize** e **Deserialize**.</span><span class="sxs-lookup"><span data-stu-id="96453-113">The central class in XML serialization is the <xref:System.Xml.Serialization.XmlSerializer> class, and the most important methods in this class are the **Serialize** and **Deserialize** methods.</span></span> <span data-ttu-id="96453-114">O <xref:System.Xml.Serialization.XmlSerializer> cria arquivos C# e compila-os em arquivos .dll para executar essa serialização.</span><span class="sxs-lookup"><span data-stu-id="96453-114">The <xref:System.Xml.Serialization.XmlSerializer> creates C# files and compiles them into .dll files to perform this serialization.</span></span> <span data-ttu-id="96453-115">O [XML Serializer Generator Tool (Sgen.exe)](xml-serializer-generator-tool-sgen-exe.md) foi projetado para gerar esses assemblies de serialização com antecedência a serem implantados com seu aplicativo e melhorar o desempenho de inicialização.</span><span class="sxs-lookup"><span data-stu-id="96453-115">The [XML Serializer Generator Tool (Sgen.exe)](xml-serializer-generator-tool-sgen-exe.md) is designed to generate these serialization assemblies in advance to be deployed with your application and improve startup performance.</span></span> <span data-ttu-id="96453-116">O fluxo XML gerado pelo **XmlSerializer** é compatível com a [recomendação de linguagem de definição de esquema XML (XSD](https://www.w3.org/TR/xslt)) do World Wide Web Consortium (W3C) 1,0.</span><span class="sxs-lookup"><span data-stu-id="96453-116">The XML stream generated by the **XmlSerializer** is compliant with the World Wide Web Consortium (W3C) [XML Schema definition language (XSD) 1.0 recommendation](https://www.w3.org/TR/xslt).</span></span> <span data-ttu-id="96453-117">Além disso, os tipos de dados gerados são compatíveis com o documento intitulado "XML Schema Part 2: Datatypes".</span><span class="sxs-lookup"><span data-stu-id="96453-117">Furthermore, the data types generated are compliant with the document titled "XML Schema Part 2: Datatypes."</span></span>

 <span data-ttu-id="96453-118">Os dados em seus objetos são descritos com o uso de construções de linguagem de programação como classes, campos, propriedades, tipos primitivos, matrizes e até mesmo XML inserido na forma de objetos **XmlElement** ou **XmlAttribute**.</span><span class="sxs-lookup"><span data-stu-id="96453-118">The data in your objects is described using programming language constructs like classes, fields, properties, primitive types, arrays, and even embedded XML in the form of **XmlElement** or **XmlAttribute** objects.</span></span> <span data-ttu-id="96453-119">Você tem a opção de criar suas próprias classes, anotadas com atributos, ou de usar a ferramenta de definição de esquema XML para gerar as classes com base em um esquema XML existente.</span><span class="sxs-lookup"><span data-stu-id="96453-119">You have the option of creating your own classes, annotated with attributes, or using the XML Schema Definition tool to generate the classes based on an existing XML Schema.</span></span>

 <span data-ttu-id="96453-120">Se você tiver um esquema XML, poderá executar a ferramenta de definição de esquema XML para gerar um conjunto de classes fortemente tipadas para o esquema e anotadas com atributos.</span><span class="sxs-lookup"><span data-stu-id="96453-120">If you have an XML Schema, you can run the XML Schema Definition tool to produce a set of classes that are strongly typed to the schema and annotated with attributes.</span></span> <span data-ttu-id="96453-121">Quando uma instância desse tipo de classe é serializada, o XML adere ao esquema XML.</span><span class="sxs-lookup"><span data-stu-id="96453-121">When an instance of such a class is serialized, the generated XML adheres to the XML Schema.</span></span> <span data-ttu-id="96453-122">Se você tiver uma classe desse tipo, poderá programar com um modelo de objeto facilmente manipulado com a certeza de que o XML gerado está de acordo com o esquema XML.</span><span class="sxs-lookup"><span data-stu-id="96453-122">Provided with such a class, you can program against an easily manipulated object model while being assured that the generated XML conforms to the XML schema.</span></span> <span data-ttu-id="96453-123">Essa é uma alternativa ao uso de outras classes no .NET, como as classes **XmlReader** e **XmlWriter** , para analisar e gravar um fluxo XML.</span><span class="sxs-lookup"><span data-stu-id="96453-123">This is an alternative to using other classes in .NET, such as the **XmlReader** and **XmlWriter** classes, to parse and write an XML stream.</span></span> <span data-ttu-id="96453-124">Para obter mais informações, consulte [Documentos e dados XML](../data/xml/index.md).</span><span class="sxs-lookup"><span data-stu-id="96453-124">For more information, see [XML Documents and Data](../data/xml/index.md).</span></span> <span data-ttu-id="96453-125">Essas classes permitem analisar qualquer fluxo XML.</span><span class="sxs-lookup"><span data-stu-id="96453-125">These classes allow you to parse any XML stream.</span></span> <span data-ttu-id="96453-126">Em contraste, use **XmlSerializer** quando o fluxo XML precisar estar em conformidade com um esquema XML conhecido.</span><span class="sxs-lookup"><span data-stu-id="96453-126">In contrast, use the **XmlSerializer** when the XML stream is expected to conform to a known XML Schema.</span></span>

 <span data-ttu-id="96453-127">Os atributos controlam o fluxo XML gerado pela classe **XmlSerializer**, permitindo que você defina itens do fluxo XML, como o namespace de XML, o nome do elemento, o nome do atributo e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="96453-127">Attributes control the XML stream generated by the **XmlSerializer** class, allowing you to set the XML namespace, element name, attribute name, and so on, of the XML stream.</span></span> <span data-ttu-id="96453-128">Para obter mais informações sobre como esses atributos e como eles controlam a serialização XML, consulte [Controlando a serialização XML usando atributos](controlling-xml-serialization-using-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="96453-128">For more information about these attributes and how they control XML serialization, see [Controlling XML Serialization Using Attributes](controlling-xml-serialization-using-attributes.md).</span></span> <span data-ttu-id="96453-129">Para ver uma tabela desses atributos que são usados para controlar o XML gerado, consulte [Atributos que controlam a serialização XML](attributes-that-control-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="96453-129">For a table of those attributes that are used to control the generated XML, see [Attributes That Control XML Serialization](attributes-that-control-xml-serialization.md).</span></span>

 <span data-ttu-id="96453-130">A classe **XmlSerializer** pode serializar ainda mais um objeto e gerar um fluxo XML SOAP codificado.</span><span class="sxs-lookup"><span data-stu-id="96453-130">The **XmlSerializer** class can further serialize an object and generate an encoded SOAP XML stream.</span></span> <span data-ttu-id="96453-131">O XML gerado adere à seção 5 do documento "Simple Object Access Protocol (SOAP) 1.1" do World Wide Web Consortium.</span><span class="sxs-lookup"><span data-stu-id="96453-131">The generated XML adheres to section 5 of the World Wide Web Consortium document titled "Simple Object Access Protocol (SOAP) 1.1."</span></span> <span data-ttu-id="96453-132">Para obter mais informações sobre esse processo, consulte [Como serializar um objeto como um fluxo XML codificado para SOAP](how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md).</span><span class="sxs-lookup"><span data-stu-id="96453-132">For more information about this process, see [How to: Serialize an Object as a SOAP-Encoded XML Stream](how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md).</span></span> <span data-ttu-id="96453-133">Para ver uma tabela dos atributos que controlam o XML gerado, consulte [Atributos que controlam a serialização SOAP codificada](attributes-that-control-encoded-soap-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="96453-133">For a table of the attributes that control the generated XML, see [Attributes That Control Encoded SOAP Serialization](attributes-that-control-encoded-soap-serialization.md).</span></span>

 <span data-ttu-id="96453-134">A classe **XmlSerializer** gera as mensagens SOAP criadas por serviços Web XML e passadas para eles.</span><span class="sxs-lookup"><span data-stu-id="96453-134">The **XmlSerializer** class generates the SOAP messages created by, and passed to, XML Web services.</span></span> <span data-ttu-id="96453-135">Para controlar as mensagens SOAP, você pode aplicar atributos às classes, aos valores de retorno, aos parâmetros e aos campos localizados em um arquivo de serviço Web XML (.asmx).</span><span class="sxs-lookup"><span data-stu-id="96453-135">To control the SOAP messages, you can apply attributes to the classes, return values, parameters, and fields found in an XML Web service file (.asmx).</span></span> <span data-ttu-id="96453-136">É possível usar ambos os atributos listados em "Atributos que controlam a serialização XML" e em "Atributos que controlam a serialização SOAP codificada" porque um serviço Web XML pode usar o estilo SOAP literal ou codificado.</span><span class="sxs-lookup"><span data-stu-id="96453-136">You can use both the attributes listed in "Attributes That Control XML Serialization" and "Attributes That Control Encoded SOAP Serialization" because an XML Web service can use either the literal or encoded SOAP style.</span></span> <span data-ttu-id="96453-137">Para obter mais informações sobre como usar atributos para controlar o XML gerado por um serviço Web XML, consulte [Serialização XML com Serviços Web XML](xml-serialization-with-xml-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="96453-137">For more information about using attributes to control the XML generated by an XML Web service, see [XML Serialization with XML Web Services](xml-serialization-with-xml-web-services.md).</span></span> <span data-ttu-id="96453-138">Para obter mais informações sobre SOAP e XML Web Services, consulte [Personalizando a formatação de mensagens SOAP](/previous-versions/dotnet/netframework-4.0/dkwy2d72(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="96453-138">For more information about SOAP and XML Web services, see [Customizing SOAP Message Formatting](/previous-versions/dotnet/netframework-4.0/dkwy2d72(v=vs.100)).</span></span>

## <a name="security-considerations-for-xmlserializer-applications"></a><span data-ttu-id="96453-139">Considerações de segurança para aplicativos XmlSerializer</span><span class="sxs-lookup"><span data-stu-id="96453-139">Security Considerations for XmlSerializer Applications</span></span>

<span data-ttu-id="96453-140">Ao criar um aplicativo que usa o **XmlSerializer**, esteja ciente dos seguintes itens e suas implicações:</span><span class="sxs-lookup"><span data-stu-id="96453-140">When creating an application that uses the **XmlSerializer**, be aware of the following items and their implications:</span></span>

- <span data-ttu-id="96453-141">O **XmlSerializer** cria arquivos C# (.cs) e compila-os em arquivos .dll no diretório nomeado pela variável de ambiente TEMP; a serialização ocorre com essas DLLs.</span><span class="sxs-lookup"><span data-stu-id="96453-141">The **XmlSerializer** creates C# (.cs) files and compiles them into .dll files in the directory named by the TEMP environment variable; serialization occurs with those DLLs.</span></span>

  > [!NOTE]
  > <span data-ttu-id="96453-142">Esses assemblies de serialização podem ser gerados com antecedência e assinados com o uso da ferramenta SGen.exe.</span><span class="sxs-lookup"><span data-stu-id="96453-142">These serialization assemblies can be generated in advance and signed by using the SGen.exe tool.</span></span> <span data-ttu-id="96453-143">Isso não funciona em um servidor de serviços Web.</span><span class="sxs-lookup"><span data-stu-id="96453-143">This does not work on a server of Web services.</span></span> <span data-ttu-id="96453-144">Em outras palavras, esses assemblies são apenas para uso de cliente e para serialização manual.</span><span class="sxs-lookup"><span data-stu-id="96453-144">In other words, it is only for client use and for manual serialization.</span></span>

  <span data-ttu-id="96453-145">O código e as DLLs ficam vulneráveis a um processo mal-intencionado no momento de criação e compilação.</span><span class="sxs-lookup"><span data-stu-id="96453-145">The code and the DLLs are vulnerable to a malicious process at the time of creation and compilation.</span></span> <span data-ttu-id="96453-146">Quando um computador que execute o Microsoft Windows NT 4.0 ou posterior é usado, é possível que dois ou mais usuários compartilhem o diretório TEMP.</span><span class="sxs-lookup"><span data-stu-id="96453-146">When using a computer running Microsoft Windows NT 4.0 or later, it might be possible for two or more users to share the TEMP directory.</span></span> <span data-ttu-id="96453-147">O compartilhamento de um diretório TEMP é perigoso quando as duas contas têm privilégios de segurança diferentes e a conta com maior privilégio executa um aplicativo usando o **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="96453-147">Sharing a TEMP directory is dangerous if the two accounts have different security privileges and the higher-privilege account runs an application using the **XmlSerializer**.</span></span> <span data-ttu-id="96453-148">Nesse caso, um usuário pode violar a segurança do computador substituindo o arquivo .cs ou .dll compilado.</span><span class="sxs-lookup"><span data-stu-id="96453-148">In this case, one user can breach the computer's security by replacing either the .cs or .dll file that is compiled.</span></span> <span data-ttu-id="96453-149">Para eliminar essa preocupação, sempre verifique se cada conta no computador tem seu próprio perfil.</span><span class="sxs-lookup"><span data-stu-id="96453-149">To eliminate this concern, always be sure that each account on the computer has its own profile.</span></span> <span data-ttu-id="96453-150">Por padrão, as variáveis de ambiente TEMP apontam para um diretório diferente para cada conta.</span><span class="sxs-lookup"><span data-stu-id="96453-150">By default, the TEMP environment variable points to a different directory for each account.</span></span>

- <span data-ttu-id="96453-151">Se algum usuário mal-intencionado enviar um fluxo contínuo de dados XML para um servidor Web (um ataque de negação de serviço), então o **XmlSerializer** continuará a processar os dados até o computador ser executado com um número insuficiente de recursos.</span><span class="sxs-lookup"><span data-stu-id="96453-151">If a malicious user sends a continuous stream of XML data to a Web server (a denial of service attack), then the **XmlSerializer** continues to process the data until the computer runs low on resources.</span></span>

  <span data-ttu-id="96453-152">Esse tipo de ataque será eliminado se você usar um computador que execute o IIS (Serviços de Informações da Internet) e seu aplicativo for executado no IIS.</span><span class="sxs-lookup"><span data-stu-id="96453-152">This kind of attack is eliminated if you are using a computer running Internet Information Services (IIS), and your application is running within IIS.</span></span> <span data-ttu-id="96453-153">Os IIS apresenta um portão que não processa fluxos maiores do que uma quantidade especificada (o padrão é de 4 KB).</span><span class="sxs-lookup"><span data-stu-id="96453-153">IIS features a gate that does not process streams longer than a set amount (the default is 4 KB).</span></span> <span data-ttu-id="96453-154">Se você criar um aplicativo que não use o IIS e que desserialize com o **XmlSerializer**, você deverá implementar um portão similar que evite um ataque de negação de serviço.</span><span class="sxs-lookup"><span data-stu-id="96453-154">If you create an application that does not use IIS and deserializes with the **XmlSerializer**, you should implement a similar gate that prevents a denial of service attack.</span></span>

- <span data-ttu-id="96453-155">O **XmlSerializer** serializa dados e executa qualquer código usando qualquer tipo especificado para ele.</span><span class="sxs-lookup"><span data-stu-id="96453-155">The **XmlSerializer** serializes data and runs any code using any type given to it.</span></span>

  <span data-ttu-id="96453-156">Existem duas maneiras de um objeto mal-intencionado apresentar uma ameaça.</span><span class="sxs-lookup"><span data-stu-id="96453-156">There are two ways in which a malicious object presents a threat.</span></span> <span data-ttu-id="96453-157">Ele pode executar o código mal-intencionado ou injetar o código mal-intencionado no arquivo C# criado pelo **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="96453-157">It could run malicious code or it could inject malicious code into the C# file created by the **XmlSerializer**.</span></span> <span data-ttu-id="96453-158">No segundo caso, há uma possibilidade teórica de que um objeto mal-intencionado possa, de alguma forma, injetar o código no arquivo C# criado pelo **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="96453-158">In the second case, there is a theoretical possibility that a malicious object may somehow inject code into the C# file created by the **XmlSerializer**.</span></span> <span data-ttu-id="96453-159">Embora esse problema tenha sido examinado detalhadamente e um ataque desse tipo seja considerado improvável, é preciso tomar cuidado para nunca serializar dados com um tipo desconhecido e não confiável.</span><span class="sxs-lookup"><span data-stu-id="96453-159">Although this issue has been examined thoroughly, and such an attack is considered unlikely, you should take the precaution of never serializing data with an unknown and untrusted type.</span></span>

- <span data-ttu-id="96453-160">Dados confidenciais serializados podem ficar vulneráveis.</span><span class="sxs-lookup"><span data-stu-id="96453-160">Serialized sensitive data might be vulnerable.</span></span>

  <span data-ttu-id="96453-161">Depois que o **XmlSerializer** tiver dados serializados, ele poderá ser armazenado como um arquivo XML ou outro armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="96453-161">After the **XmlSerializer** has serialized data, it can be stored as an XML file or other data store.</span></span> <span data-ttu-id="96453-162">Se seu repositório de dados estiver disponível para outros processos, ou estiver visível em uma intranet ou na Internet, os dados poderão ser roubados e usados de maneira mal-intencionada.</span><span class="sxs-lookup"><span data-stu-id="96453-162">If your data store is available to other processes, or is visible on an intranet or the Internet, the data can be stolen and used maliciously.</span></span> <span data-ttu-id="96453-163">Por exemplo, quando você cria um aplicativo que serializa pedidos que incluam números de cartão de crédito, os dados são altamente confidenciais.</span><span class="sxs-lookup"><span data-stu-id="96453-163">For example, if you create an application that serializes orders that include credit card numbers, the data is highly sensitive.</span></span> <span data-ttu-id="96453-164">Para ajudar a evitar problemas, sempre proteja o repositório dos dados e siga as etapas para mantê-lo privado.</span><span class="sxs-lookup"><span data-stu-id="96453-164">To help prevent this, always protect the store for your data and take steps to keep it private.</span></span>

## <a name="serialization-of-a-simple-class"></a><span data-ttu-id="96453-165">Serialização de uma classe simples</span><span class="sxs-lookup"><span data-stu-id="96453-165">Serialization of a Simple Class</span></span>

<span data-ttu-id="96453-166">O exemplo de código a seguir mostra uma classe básica com um campo público.</span><span class="sxs-lookup"><span data-stu-id="96453-166">The following code example shows a basic class with a public field.</span></span>

```vb
Public Class OrderForm
    Public OrderDate As DateTime
End Class
```

```csharp
public class OrderForm
{
    public DateTime OrderDate;
}
```

<span data-ttu-id="96453-167">Quando uma instância dessa classe é serializada, ela pode ser similar ao exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="96453-167">When an instance of this class is serialized, it might resemble the following.</span></span>

```xml
<OrderForm>
    <OrderDate>12/12/01</OrderDate>
</OrderForm>
```

<span data-ttu-id="96453-168">Para obter mais exemplos de serialização, consulte [Exemplos de Serialização XML](examples-of-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="96453-168">For more examples of serialization, see [Examples of XML Serialization](examples-of-xml-serialization.md).</span></span>

## <a name="items-that-can-be-serialized"></a><span data-ttu-id="96453-169">Itens que podem ser serializados</span><span class="sxs-lookup"><span data-stu-id="96453-169">Items That Can Be Serialized</span></span>

<span data-ttu-id="96453-170">Os seguintes itens podem ser serializados usando a classe **XmlSerializer** :</span><span class="sxs-lookup"><span data-stu-id="96453-170">The following items can be serialized using the **XmlSerializer** class:</span></span>

- <span data-ttu-id="96453-171">Propriedades e campos de leitura/gravação públicos de classes públicas.</span><span class="sxs-lookup"><span data-stu-id="96453-171">Public read/write properties and fields of public classes.</span></span>

- <span data-ttu-id="96453-172">Classes que implementam **ICollection** ou **IEnumerable**.</span><span class="sxs-lookup"><span data-stu-id="96453-172">Classes that implement **ICollection** or **IEnumerable**.</span></span>

  > [!NOTE]
  > <span data-ttu-id="96453-173">Somente as coleções são serializadas, não propriedades públicas.</span><span class="sxs-lookup"><span data-stu-id="96453-173">Only collections are serialized, not public properties.</span></span>

- <span data-ttu-id="96453-174">Objetos **XmlElement**.</span><span class="sxs-lookup"><span data-stu-id="96453-174">**XmlElement** objects.</span></span>

- <span data-ttu-id="96453-175">Objetos **XmlNode**.</span><span class="sxs-lookup"><span data-stu-id="96453-175">**XmlNode** objects.</span></span>

- <span data-ttu-id="96453-176">Objetos **DataSet**.</span><span class="sxs-lookup"><span data-stu-id="96453-176">**DataSet** objects.</span></span>

 <span data-ttu-id="96453-177">Para obter mais informações sobre a serialização ou desserialização de objetos, consulte [Como serializar um objeto](how-to-serialize-an-object.md) e [Como desserializar um objeto](how-to-deserialize-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="96453-177">For more information about serializing or deserializing objects, see [How to: Serialize an Object](how-to-serialize-an-object.md) and [How to: Deserialize an Object](how-to-deserialize-an-object.md).</span></span>

## <a name="advantages-of-using-xml-serialization"></a><span data-ttu-id="96453-178">Vantagens de usar a serialização XML</span><span class="sxs-lookup"><span data-stu-id="96453-178">Advantages of Using XML Serialization</span></span>

<span data-ttu-id="96453-179">A classe **XmlSerializer** fornece controle completo e flexível quando você serializa um objeto como XML.</span><span class="sxs-lookup"><span data-stu-id="96453-179">The **XmlSerializer** class gives you complete and flexible control when you serialize an object as XML.</span></span> <span data-ttu-id="96453-180">Se você estiver criando um serviço Web XML, poderá aplicar atributos que controlam a serialização para classes e membros para garantir que a saída XML esteja de acordo com um esquema específico.</span><span class="sxs-lookup"><span data-stu-id="96453-180">If you are creating an XML Web service, you can apply attributes that control serialization to classes and members to ensure that the XML output conforms to a specific schema.</span></span>

<span data-ttu-id="96453-181">Por exemplo, **XmlSerializer** permite que você:</span><span class="sxs-lookup"><span data-stu-id="96453-181">For example, **XmlSerializer** enables you to:</span></span>

- <span data-ttu-id="96453-182">Especificar se um campo ou propriedade deve ser codificado como atributo ou como elemento.</span><span class="sxs-lookup"><span data-stu-id="96453-182">Specify whether a field or property should be encoded as an attribute or an element.</span></span>

- <span data-ttu-id="96453-183">Especificar um namespace XML a ser usado.</span><span class="sxs-lookup"><span data-stu-id="96453-183">Specify an XML namespace to use.</span></span>

- <span data-ttu-id="96453-184">Especificar o nome de um elemento ou atributo se um nome de campo ou de propriedade estiver incorreto.</span><span class="sxs-lookup"><span data-stu-id="96453-184">Specify the name of an element or attribute if a field or property name is inappropriate.</span></span>

<span data-ttu-id="96453-185">Outra vantagem da serialização XML é que não há restrições aos aplicativos que você desenvolve, contanto que o fluxo XML gerado esteja de acordo com o esquema especificado.</span><span class="sxs-lookup"><span data-stu-id="96453-185">Another advantage of XML serialization is that you have no constraints on the applications you develop, as long as the XML stream that is generated conforms to a given schema.</span></span> <span data-ttu-id="96453-186">Imagine um esquema usado para descrever livros.</span><span class="sxs-lookup"><span data-stu-id="96453-186">Imagine a schema that is used to describe books.</span></span> <span data-ttu-id="96453-187">Ele apresenta os elementos título, autor, editor e número ISBN.</span><span class="sxs-lookup"><span data-stu-id="96453-187">It features a title, author, publisher, and ISBN number element.</span></span> <span data-ttu-id="96453-188">Você pode desenvolver um aplicativo que processe os dados XML da forma que desejar, por exemplo, como um pedido de livro ou como um inventário de livros.</span><span class="sxs-lookup"><span data-stu-id="96453-188">You can develop an application that processes the XML data in any way you want, for example, as a book order, or as an inventory of books.</span></span> <span data-ttu-id="96453-189">Em ambos os casos, o único requisito é que o fluxo XML esteja de acordo com o esquema XSD especificado.</span><span class="sxs-lookup"><span data-stu-id="96453-189">In either case, the only requirement is that the XML stream conforms to the specified XML Schema definition language (XSD) schema.</span></span>

## <a name="xml-serialization-considerations"></a><span data-ttu-id="96453-190">Considerações de serialização XML</span><span class="sxs-lookup"><span data-stu-id="96453-190">XML Serialization Considerations</span></span>

<span data-ttu-id="96453-191">A observação a seguir deve ser considerada ao usar a classe **XmlSerializer**:</span><span class="sxs-lookup"><span data-stu-id="96453-191">The following should be considered when using the **XmlSerializer** class:</span></span>

- <span data-ttu-id="96453-192">A ferramenta Sgen.exe é expressamente destinada a gerar assemblies de serialização para desempenho máximo.</span><span class="sxs-lookup"><span data-stu-id="96453-192">The Sgen.exe tool is expressly designed to generate serialization assemblies for optimum performance.</span></span>

- <span data-ttu-id="96453-193">Os dados serializados contêm somente os próprios dados e a estrutura de suas classes.</span><span class="sxs-lookup"><span data-stu-id="96453-193">The serialized data contains only the data itself and the structure of your classes.</span></span> <span data-ttu-id="96453-194">A identidade de tipos e as informações de assemblies não são incluídas.</span><span class="sxs-lookup"><span data-stu-id="96453-194">Type identity and assembly information are not included.</span></span>

- <span data-ttu-id="96453-195">Somente as propriedades e os campos públicos podem ser serializados.</span><span class="sxs-lookup"><span data-stu-id="96453-195">Only public properties and fields can be serialized.</span></span> <span data-ttu-id="96453-196">As propriedades devem ter acessadores públicos (métodos get e set).</span><span class="sxs-lookup"><span data-stu-id="96453-196">Properties must have public accessors (get and set methods).</span></span> <span data-ttu-id="96453-197">Se você precisar serializar dados não públicos, use a classe <xref:System.Runtime.Serialization.DataContractSerializer>, em vez da serialização XML.</span><span class="sxs-lookup"><span data-stu-id="96453-197">If you must serialize non-public data, use the <xref:System.Runtime.Serialization.DataContractSerializer> class rather than XML serialization.</span></span>

- <span data-ttu-id="96453-198">Uma classe deve ter um construtor sem parâmetros para ser serializado pelo **XmlSerializer**.</span><span class="sxs-lookup"><span data-stu-id="96453-198">A class must have a parameterless constructor to be serialized by **XmlSerializer**.</span></span>

- <span data-ttu-id="96453-199">Os métodos não podem ser serializados.</span><span class="sxs-lookup"><span data-stu-id="96453-199">Methods cannot be serialized.</span></span>

- <span data-ttu-id="96453-200">**XmlSerializer** pode processar classes que implementam **IEnumerable** ou **ICollection** de maneira diferente caso elas atendam a determinados requisitos, como a seguir.</span><span class="sxs-lookup"><span data-stu-id="96453-200">**XmlSerializer** can process classes that implement **IEnumerable** or **ICollection** differently if they meet certain requirements, as follows.</span></span>

  <span data-ttu-id="96453-201">Uma classe que implementa **IEnumerable** deve implementar um método **Add** público que aceita um único parâmetro.</span><span class="sxs-lookup"><span data-stu-id="96453-201">A class that implements **IEnumerable** must implement a public **Add** method that takes a single parameter.</span></span> <span data-ttu-id="96453-202">O parâmetro do método **Add** deve ser consistente (polimórfico) com o tipo retornado da propriedade **IEnumerator.Current**, retornada do método **GetEnumerator**.</span><span class="sxs-lookup"><span data-stu-id="96453-202">The **Add** method's parameter must be consistent (polymorphic) with the type returned from the **IEnumerator.Current** property returned from the **GetEnumerator** method.</span></span>

  <span data-ttu-id="96453-203">Uma classe que implementa **ICollection**, além de **IEnumerable** (como **CollectionBase**), deve ter uma propriedade pública indexada **Item** (um indexador em C#) que aceite um inteiro e deve ter uma propriedade pública **Count** do tipo **integer**.</span><span class="sxs-lookup"><span data-stu-id="96453-203">A class that implements **ICollection** in addition to **IEnumerable** (such as **CollectionBase**) must have a public **Item** indexed property (an indexer in C#) that takes an integer and it must have a public **Count** property of type **integer**.</span></span> <span data-ttu-id="96453-204">O parâmetro passado para o método **Add** deve ser do mesmo tipo que aquele retornado pela propriedade **Item** ou deve corresponder a uma das bases desse tipo.</span><span class="sxs-lookup"><span data-stu-id="96453-204">The parameter passed to the **Add** method must be the same type as that returned from the **Item** property, or one of that type's bases.</span></span>

  <span data-ttu-id="96453-205">Para as classes que implementam **ICollection**, os valores a serem serializados são recuperados da propriedade indexada **Item**, não ao chamar **GetEnumerator**.</span><span class="sxs-lookup"><span data-stu-id="96453-205">For classes that implement **ICollection**, values to be serialized are retrieved from the indexed **Item** property rather than by calling **GetEnumerator**.</span></span> <span data-ttu-id="96453-206">Além disso, propriedades e campos públicos não são serializados, exceto os campos públicos que retornam outra classe de coleção (que implemente **ICollection**).</span><span class="sxs-lookup"><span data-stu-id="96453-206">Also, public fields and properties are not serialized, with the exception of public fields that return another collection class (one that implements **ICollection**).</span></span> <span data-ttu-id="96453-207">Para obter um exemplo, consulte [Exemplos de serialização XML](examples-of-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="96453-207">For an example, see [Examples of XML Serialization](examples-of-xml-serialization.md).</span></span>

## <a name="xsd-data-type-mapping"></a><span data-ttu-id="96453-208">Mapeamento de tipo de dados XSD</span><span class="sxs-lookup"><span data-stu-id="96453-208">XSD Data Type Mapping</span></span>

<span data-ttu-id="96453-209">O documento W3C intitulado [XML Schema parte 2: datatypes](https://www.w3.org/TR/xmlschema-2/) especifica os tipos de dados simples que são permitidos em um esquema XSD (linguagem de definição de esquema XML).</span><span class="sxs-lookup"><span data-stu-id="96453-209">The W3C document titled [XML Schema Part 2: Datatypes](https://www.w3.org/TR/xmlschema-2/) specifies the simple data types that are allowed in an XML Schema definition language (XSD) schema.</span></span> <span data-ttu-id="96453-210">Para muitos deles (por exemplo, **int** e **decimal**), há um tipo de dados correspondente no .net.</span><span class="sxs-lookup"><span data-stu-id="96453-210">For many of these (for example, **int** and **decimal**), there is a corresponding data type in .NET.</span></span> <span data-ttu-id="96453-211">No entanto, alguns tipos de dados XML não têm um tipo de dados .NET correspondente, por exemplo, o tipo de dados **NMTOKEN** .</span><span class="sxs-lookup"><span data-stu-id="96453-211">However, some XML data types do not have a corresponding .NET data type, for example, the **NMTOKEN** data type.</span></span> <span data-ttu-id="96453-212">Nesses casos, se você usar a ferramenta de definição de esquema XML ([Ferramenta de Definição de Esquema XML (Xsd.exe)](xml-schema-definition-tool-xsd-exe.md)) para gerar classes de um esquema, um atributo apropriado será aplicado a um membro de tipo string e a respectiva propriedade **DataType** será definida como o nome do tipo de dados XML.</span><span class="sxs-lookup"><span data-stu-id="96453-212">In such cases, if you use the XML Schema Definition tool ([XML Schema Definition Tool (Xsd.exe)](xml-schema-definition-tool-xsd-exe.md)) to generate classes from a schema, an appropriate attribute is applied to a member of type string, and its **DataType** property is set to the XML data type name.</span></span> <span data-ttu-id="96453-213">Por exemplo, se um esquema contiver um elemento nomeado "MyToken" com o tipo de dados XML **NMTOKEN**, a classe gerada poderá conter um membro conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="96453-213">For example, if a schema contains an element named "MyToken" with the XML data type **NMTOKEN**, the generated class might contain a member as shown in the following example.</span></span>

```vb
<XmlElement(DataType:="NMTOKEN")> _
Public MyToken As String
```

```csharp
[XmlElement(DataType = "NMTOKEN")]
public string MyToken;
```

<span data-ttu-id="96453-214">Da mesma forma, se você estiver criando uma classe que precise estar em conformidade com um esquema XML (XSD) específico, deverá aplicar o atributo apropriado e definir sua propriedade **DataType** como o nome do tipo de dados XML desejado.</span><span class="sxs-lookup"><span data-stu-id="96453-214">Similarly, if you are creating a class that must conform to a specific XML Schema (XSD), you should apply the appropriate attribute and set its **DataType** property to the desired XML data type name.</span></span>

<span data-ttu-id="96453-215">Para obter uma lista completa de mapeamentos de tipo, consulte a propriedade **DataType** para algumas das seguintes classes de atributos:</span><span class="sxs-lookup"><span data-stu-id="96453-215">For a complete list of type mappings, see the **DataType** property for any of the following attribute classes:</span></span>

- <xref:System.Xml.Serialization.SoapAttributeAttribute>

- <xref:System.Xml.Serialization.SoapElementAttribute>

- <xref:System.Xml.Serialization.XmlArrayItemAttribute>

- <xref:System.Xml.Serialization.XmlAttributeAttribute>

- <xref:System.Xml.Serialization.XmlElementAttribute>

- <xref:System.Xml.Serialization.XmlRootAttribute>

## <a name="see-also"></a><span data-ttu-id="96453-216">Veja também</span><span class="sxs-lookup"><span data-stu-id="96453-216">See also</span></span>

- <xref:System.Xml.Serialization.XmlSerializer>
- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.IO.FileStream>
- [<span data-ttu-id="96453-217">Serialização de XML e SOAP</span><span class="sxs-lookup"><span data-stu-id="96453-217">XML and SOAP Serialization</span></span>](xml-and-soap-serialization.md)
- [<span data-ttu-id="96453-218">Serialização binária</span><span class="sxs-lookup"><span data-stu-id="96453-218">Binary Serialization</span></span>](binary-serialization.md)
- [<span data-ttu-id="96453-219">Serialização</span><span class="sxs-lookup"><span data-stu-id="96453-219">Serialization</span></span>](index.md)
- <xref:System.Xml.Serialization.XmlSerializer>
- [<span data-ttu-id="96453-220">Exemplos de Serialização XML</span><span class="sxs-lookup"><span data-stu-id="96453-220">Examples of XML Serialization</span></span>](examples-of-xml-serialization.md)
- [<span data-ttu-id="96453-221">Como serializar um objeto</span><span class="sxs-lookup"><span data-stu-id="96453-221">How to: Serialize an Object</span></span>](how-to-serialize-an-object.md)
- [<span data-ttu-id="96453-222">Como desserializar um objeto</span><span class="sxs-lookup"><span data-stu-id="96453-222">How to: Deserialize an Object</span></span>](how-to-deserialize-an-object.md)
