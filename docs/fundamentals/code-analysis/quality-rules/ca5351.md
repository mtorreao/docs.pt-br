---
title: A regra CA5351 não usa algoritmos de criptografia desfeitos (análise de código)
description: Saiba mais sobre a regra de regra de análise de código CA5351 não usar algoritmos de criptografia desfeitos
ms.date: 11/04/2016
ms.topic: reference
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 6e84d4faa3c9ac061b411fd14422ec29f4620b3e
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/25/2020
ms.locfileid: "96584714"
---
# <a name="ca5351-do-not-use-broken-cryptographic-algorithms"></a><span data-ttu-id="0ef10-103">CA5351 não use algoritmos de criptografia desfeitos</span><span class="sxs-lookup"><span data-stu-id="0ef10-103">CA5351 Do Not Use Broken Cryptographic Algorithms</span></span>

| | <span data-ttu-id="0ef10-104">Valor</span><span class="sxs-lookup"><span data-stu-id="0ef10-104">Value</span></span> |
|-|-|
| <span data-ttu-id="0ef10-105">**ID da regra**</span><span class="sxs-lookup"><span data-stu-id="0ef10-105">**Rule ID**</span></span> |<span data-ttu-id="0ef10-106">CA5351</span><span class="sxs-lookup"><span data-stu-id="0ef10-106">CA5351</span></span>|
| <span data-ttu-id="0ef10-107">**Categoria**</span><span class="sxs-lookup"><span data-stu-id="0ef10-107">**Category**</span></span> |<span data-ttu-id="0ef10-108">Microsoft.Security</span><span class="sxs-lookup"><span data-stu-id="0ef10-108">Microsoft.Security</span></span>|
| <span data-ttu-id="0ef10-109">**A correção está sendo interrompida ou não está sendo interrompida**</span><span class="sxs-lookup"><span data-stu-id="0ef10-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="0ef10-110">Sem interrupção</span><span class="sxs-lookup"><span data-stu-id="0ef10-110">Non-breaking</span></span>|

> [!NOTE]
> <span data-ttu-id="0ef10-111">Esse aviso foi atualizado pela última vez em 2015 de novembro.</span><span class="sxs-lookup"><span data-stu-id="0ef10-111">This warning was last updated on November 2015.</span></span>

## <a name="cause"></a><span data-ttu-id="0ef10-112">Causa</span><span class="sxs-lookup"><span data-stu-id="0ef10-112">Cause</span></span>

<span data-ttu-id="0ef10-113">Funções de hash, como <xref:System.Security.Cryptography.MD5> e algoritmos de criptografia, como <xref:System.Security.Cryptography.DES> e <xref:System.Security.Cryptography.RC2> podem expor um risco significativo e podem resultar na exposição de informações confidenciais por meio de técnicas de ataque triviais, como ataques de força bruta e colisões de hash.</span><span class="sxs-lookup"><span data-stu-id="0ef10-113">Hashing functions such as <xref:System.Security.Cryptography.MD5> and encryption algorithms such as <xref:System.Security.Cryptography.DES> and <xref:System.Security.Cryptography.RC2> can expose significant risk and may result in the exposure of sensitive information through trivial attack techniques, such as brute force attacks and hash collisions.</span></span>

<span data-ttu-id="0ef10-114">A lista de algoritmos criptográficos a seguir está sujeita a ataques criptográficos conhecidos.</span><span class="sxs-lookup"><span data-stu-id="0ef10-114">The cryptographic algorithms list below are subject to known cryptographic attacks.</span></span> <span data-ttu-id="0ef10-115">O algoritmo de hash criptográfico <xref:System.Security.Cryptography.MD5> está sujeito a ataques de colisão de hash.</span><span class="sxs-lookup"><span data-stu-id="0ef10-115">The cryptographic hash algorithm <xref:System.Security.Cryptography.MD5> is subject to hash collision attacks.</span></span>  <span data-ttu-id="0ef10-116">Dependendo do uso, uma colisão de hash pode levar à representação, violação ou outros tipos de ataques em sistemas que dependem da saída criptográfica exclusiva de uma função de hash.</span><span class="sxs-lookup"><span data-stu-id="0ef10-116">Depending on the usage, a hash collision may lead to impersonation, tampering, or other kinds of attacks on systems that rely on the unique cryptographic output of a hashing function.</span></span> <span data-ttu-id="0ef10-117">Os algoritmos de criptografia <xref:System.Security.Cryptography.DES> e <xref:System.Security.Cryptography.RC2> estão sujeitos a ataques criptográficos que podem resultar na divulgação não intencional de dados criptografados.</span><span class="sxs-lookup"><span data-stu-id="0ef10-117">The encryption algorithms <xref:System.Security.Cryptography.DES> and <xref:System.Security.Cryptography.RC2> are subject to cryptographic attacks that may result in unintended disclosure of encrypted data.</span></span>

## <a name="rule-description"></a><span data-ttu-id="0ef10-118">Descrição da regra</span><span class="sxs-lookup"><span data-stu-id="0ef10-118">Rule description</span></span>

<span data-ttu-id="0ef10-119">Os algoritmos de criptografia desfeitos não são considerados seguros e seu uso deve ser desencorajado.</span><span class="sxs-lookup"><span data-stu-id="0ef10-119">Broken cryptographic algorithms are not  considered secure and their use should be discouraged.</span></span> <span data-ttu-id="0ef10-120">O algoritmo de hash MD5 é suscetível a ataques de colisão conhecidos, embora a vulnerabilidade específica varie de acordo com o contexto de uso.</span><span class="sxs-lookup"><span data-stu-id="0ef10-120">The MD5 hash algorithm is susceptible to known collision attacks, though the specific vulnerability will vary based on the context of use.</span></span>  <span data-ttu-id="0ef10-121">Os algoritmos de hash usados para garantir a integridade dos dados (por exemplo, assinatura de arquivo ou certificado digital) são particularmente vulneráveis.</span><span class="sxs-lookup"><span data-stu-id="0ef10-121">Hashing algorithms used to ensure data integrity (for example, file signature or digital certificate) are particularly vulnerable.</span></span>  <span data-ttu-id="0ef10-122">Nesse contexto, os invasores poderiam gerar duas partes separadas de dados, de modo que os dados benignos possam ser substituídos por dados mal-intencionados, sem alterar o valor de hash ou invalidar uma assinatura digital associada.</span><span class="sxs-lookup"><span data-stu-id="0ef10-122">In this context, attackers could generate two separate pieces of data, such that benign data can be substituted with malicious data, without changing the hash value or invalidating an associated digital signature.</span></span>

<span data-ttu-id="0ef10-123">Para algoritmos de criptografia:</span><span class="sxs-lookup"><span data-stu-id="0ef10-123">For encryption algorithms:</span></span>

- <span data-ttu-id="0ef10-124"><xref:System.Security.Cryptography.DES> a criptografia contém um tamanho de chave pequeno, que pode ser forçado por uma força bruta em menos de um dia.</span><span class="sxs-lookup"><span data-stu-id="0ef10-124"><xref:System.Security.Cryptography.DES> encryption contains a small key size, which could be brute-forced in less than a day.</span></span>

- <span data-ttu-id="0ef10-125"><xref:System.Security.Cryptography.RC2> a criptografia é suscetível a um ataque de chave relacionada, em que o invasor encontra relações matemáticas entre todos os valores de chave.</span><span class="sxs-lookup"><span data-stu-id="0ef10-125"><xref:System.Security.Cryptography.RC2> encryption is susceptible to a related-key attack, where the attacker finds mathematical relationships between all key values.</span></span>

<span data-ttu-id="0ef10-126">Essa regra é disparada quando encontra qualquer uma das funções criptográficas acima no código-fonte e gera um aviso ao usuário.</span><span class="sxs-lookup"><span data-stu-id="0ef10-126">This rule triggers when it finds any of the above cryptographic functions in source code and throws a warning to the user.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="0ef10-127">Como corrigir violações</span><span class="sxs-lookup"><span data-stu-id="0ef10-127">How to fix violations</span></span>

<span data-ttu-id="0ef10-128">Use opções criptograficamente mais fortes:</span><span class="sxs-lookup"><span data-stu-id="0ef10-128">Use cryptographically stronger options:</span></span>

- <span data-ttu-id="0ef10-129">Para MD5, use hashes na família [SHA-2](/windows/desktop/SecCrypto/hash-and-signature-algorithms) (por exemplo,, <xref:System.Security.Cryptography.SHA512> , <xref:System.Security.Cryptography.SHA384> <xref:System.Security.Cryptography.SHA256> ).</span><span class="sxs-lookup"><span data-stu-id="0ef10-129">For MD5, use hashes in the [SHA-2](/windows/desktop/SecCrypto/hash-and-signature-algorithms) family (for example, <xref:System.Security.Cryptography.SHA512>, <xref:System.Security.Cryptography.SHA384>, <xref:System.Security.Cryptography.SHA256>).</span></span>

- <span data-ttu-id="0ef10-130">Para DES e RC2, use <xref:System.Security.Cryptography.Aes> criptografia.</span><span class="sxs-lookup"><span data-stu-id="0ef10-130">For DES and RC2, use <xref:System.Security.Cryptography.Aes> encryption.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="0ef10-131">Quando suprimir avisos</span><span class="sxs-lookup"><span data-stu-id="0ef10-131">When to suppress warnings</span></span>

<span data-ttu-id="0ef10-132">Não suprimir um aviso desta regra, a menos que ela tenha sido revisada por um especialista em criptografia.</span><span class="sxs-lookup"><span data-stu-id="0ef10-132">Do not suppress a warning from this rule, unless it's been reviewed by a cryptographic expert.</span></span>

## <a name="pseudo-code-examples"></a><span data-ttu-id="0ef10-133">Exemplos de pseudocódigo</span><span class="sxs-lookup"><span data-stu-id="0ef10-133">Pseudo-code examples</span></span>

<span data-ttu-id="0ef10-134">Os exemplos de pseudocódigo a seguir ilustram o padrão detectado por essa regra e possíveis alternativas.</span><span class="sxs-lookup"><span data-stu-id="0ef10-134">The following pseudo-code samples illustrate the pattern detected by this rule and possible alternatives.</span></span>

### <a name="md5-hashing-violation"></a><span data-ttu-id="0ef10-135">Violação de hash MD5</span><span class="sxs-lookup"><span data-stu-id="0ef10-135">MD5 Hashing Violation</span></span>

```csharp
using System.Security.Cryptography;
...
var hashAlg = MD5.Create();
```

<span data-ttu-id="0ef10-136">Solução:</span><span class="sxs-lookup"><span data-stu-id="0ef10-136">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
var hashAlg = SHA256.Create();
```

### <a name="rc2-encryption-violation"></a><span data-ttu-id="0ef10-137">Violação de criptografia RC2</span><span class="sxs-lookup"><span data-stu-id="0ef10-137">RC2 Encryption Violation</span></span>

```csharp
using System.Security.Cryptography;
...
RC2 encAlg = RC2.Create();
```

<span data-ttu-id="0ef10-138">Solução:</span><span class="sxs-lookup"><span data-stu-id="0ef10-138">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
using (AesManaged encAlg = new AesManaged())
{
  ...
}
```

### <a name="des-encryption-violation"></a><span data-ttu-id="0ef10-139">Violação de criptografia DES</span><span class="sxs-lookup"><span data-stu-id="0ef10-139">DES Encryption Violation</span></span>

```csharp
using System.Security.Cryptography;
...
DES encAlg = DES.Create();
```

<span data-ttu-id="0ef10-140">Solução:</span><span class="sxs-lookup"><span data-stu-id="0ef10-140">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
using (AesManaged encAlg = new AesManaged())
{
  ...
}
```
