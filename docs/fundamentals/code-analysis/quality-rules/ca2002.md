---
title: 'CA2002: não bloquear objetos com identidade fraca (análise de código)'
description: 'Saiba mais sobre a regra de análise de código CA2002: não bloquear objetos com identidade fraca'
ms.date: 01/31/2018
ms.topic: reference
f1_keywords:
- DoNotLockOnObjectsWithWeakIdentity
- CA2002
helpviewer_keywords:
- CA2002
- DoNotLockOnObjectsWithWeakIdentity
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 411aec5bb2ea5e90ab8234efe95be3155818253c
ms.sourcegitcommit: a6bd4cad438fe479cbd112eae10f2cd449f06e40
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/08/2020
ms.locfileid: "96585453"
---
# <a name="ca2002-do-not-lock-on-objects-with-weak-identity"></a><span data-ttu-id="e09ed-103">CA2002: Não bloquear objetos com identidade fraca</span><span class="sxs-lookup"><span data-stu-id="e09ed-103">CA2002: Do not lock on objects with weak identity</span></span>

| | <span data-ttu-id="e09ed-104">Valor</span><span class="sxs-lookup"><span data-stu-id="e09ed-104">Value</span></span> |
|-|-|
| <span data-ttu-id="e09ed-105">**ID da regra**</span><span class="sxs-lookup"><span data-stu-id="e09ed-105">**Rule ID**</span></span> |<span data-ttu-id="e09ed-106">CA2002</span><span class="sxs-lookup"><span data-stu-id="e09ed-106">CA2002</span></span>|
| <span data-ttu-id="e09ed-107">**Categoria**</span><span class="sxs-lookup"><span data-stu-id="e09ed-107">**Category**</span></span> |<span data-ttu-id="e09ed-108">Microsoft. confiabilidade</span><span class="sxs-lookup"><span data-stu-id="e09ed-108">Microsoft.Reliability</span></span>|
| <span data-ttu-id="e09ed-109">**A correção está sendo interrompida ou não está sendo interrompida**</span><span class="sxs-lookup"><span data-stu-id="e09ed-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="e09ed-110">Sem interrupção</span><span class="sxs-lookup"><span data-stu-id="e09ed-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="e09ed-111">Causa</span><span class="sxs-lookup"><span data-stu-id="e09ed-111">Cause</span></span>

<span data-ttu-id="e09ed-112">Um thread tenta adquirir um bloqueio em um objeto que tem uma identidade fraca.</span><span class="sxs-lookup"><span data-stu-id="e09ed-112">A thread attempts to acquire a lock on an object that has a weak identity.</span></span>

## <a name="rule-description"></a><span data-ttu-id="e09ed-113">Descrição da regra</span><span class="sxs-lookup"><span data-stu-id="e09ed-113">Rule description</span></span>

<span data-ttu-id="e09ed-114">Diz-se que um objeto tem uma identidade fraca quando puder ser acessado diretamente em todos os limites de domínio do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e09ed-114">An object is said to have a weak identity when it can be directly accessed across application domain boundaries.</span></span> <span data-ttu-id="e09ed-115">Um thread que tente adquirir um bloqueio em um objeto com uma identidade fraca pode ser bloqueado por um segundo thread em um domínio de aplicativo diferente com um bloqueio no mesmo objeto.</span><span class="sxs-lookup"><span data-stu-id="e09ed-115">A thread that tries to acquire a lock on an object that has a weak identity can be blocked by a second thread in a different application domain that has a lock on the same object.</span></span>

<span data-ttu-id="e09ed-116">Os tipos a seguir têm uma identidade fraca e são sinalizados pela regra:</span><span class="sxs-lookup"><span data-stu-id="e09ed-116">The following types have a weak identity and are flagged by the rule:</span></span>

- <xref:System.String>

- <span data-ttu-id="e09ed-117">Matrizes de tipos de valor, incluindo [tipos integrais](../../../csharp/language-reference/builtin-types/integral-numeric-types.md), [tipos de ponto flutuante](../../../csharp/language-reference/builtin-types/floating-point-numeric-types.md)e <xref:System.Boolean> .</span><span class="sxs-lookup"><span data-stu-id="e09ed-117">Arrays of value types, including [integral types](../../../csharp/language-reference/builtin-types/integral-numeric-types.md), [floating-point types](../../../csharp/language-reference/builtin-types/floating-point-numeric-types.md), and <xref:System.Boolean>.</span></span>

- <xref:System.MarshalByRefObject>

- <xref:System.ExecutionEngineException>

- <xref:System.OutOfMemoryException>

- <xref:System.StackOverflowException>

- <xref:System.Reflection.MemberInfo>

- <xref:System.Reflection.ParameterInfo>

- <xref:System.Threading.Thread>

- <span data-ttu-id="e09ed-118">[este](../../../csharp/language-reference/keywords/this.md) objeto [ou](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md)</span><span class="sxs-lookup"><span data-stu-id="e09ed-118">[this](../../../csharp/language-reference/keywords/this.md) or [Me](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md) object</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="e09ed-119">Como corrigir violações</span><span class="sxs-lookup"><span data-stu-id="e09ed-119">How to fix violations</span></span>

<span data-ttu-id="e09ed-120">Para corrigir uma violação dessa regra, use um objeto de um tipo que não esteja na lista na seção Descrição.</span><span class="sxs-lookup"><span data-stu-id="e09ed-120">To fix a violation of this rule, use an object from a type that is not in the list in the Description section.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="e09ed-121">Quando suprimir avisos</span><span class="sxs-lookup"><span data-stu-id="e09ed-121">When to suppress warnings</span></span>

<span data-ttu-id="e09ed-122">É seguro suprimir o aviso se o objeto bloqueado for `this` ou `Me` e a visibilidade do tipo de autoobjeto for particular ou interno, e a instância não estiver acessível usando nenhuma referência pública.</span><span class="sxs-lookup"><span data-stu-id="e09ed-122">It is safe to suppress the warning if the locked object is `this` or `Me` and the visibility of the self object type is private or internal, and the instance is not accessible using any public reference.</span></span>

<span data-ttu-id="e09ed-123">Caso contrário, não omita um aviso dessa regra.</span><span class="sxs-lookup"><span data-stu-id="e09ed-123">Otherwise, do not suppress a warning from this rule.</span></span>

## <a name="related-rules"></a><span data-ttu-id="e09ed-124">Regras relacionadas</span><span class="sxs-lookup"><span data-stu-id="e09ed-124">Related rules</span></span>

[<span data-ttu-id="e09ed-125">CA2213: Campos descartáveis devem ser descartados</span><span class="sxs-lookup"><span data-stu-id="e09ed-125">CA2213: Disposable fields should be disposed</span></span>](ca2213.md)

## <a name="example"></a><span data-ttu-id="e09ed-126">Exemplo</span><span class="sxs-lookup"><span data-stu-id="e09ed-126">Example</span></span>

<span data-ttu-id="e09ed-127">O exemplo a seguir mostra alguns bloqueios de objeto que violam a regra.</span><span class="sxs-lookup"><span data-stu-id="e09ed-127">The following example shows some object locks that violate the rule.</span></span>

:::code language="vb" source="snippets/vb/all-rules/ca2002-do-not-lock-on-objects-with-weak-identity_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca2002.cs" id="snippet1":::

## <a name="see-also"></a><span data-ttu-id="e09ed-128">Confira também</span><span class="sxs-lookup"><span data-stu-id="e09ed-128">See also</span></span>

- <xref:System.Threading.Monitor>
- <xref:System.AppDomain>
- [<span data-ttu-id="e09ed-129">Instrução Lock (C#)</span><span class="sxs-lookup"><span data-stu-id="e09ed-129">lock Statement (C#)</span></span>](../../../csharp/language-reference/keywords/lock-statement.md)
- [<span data-ttu-id="e09ed-130">Instrução SyncLock (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="e09ed-130">SyncLock Statement (Visual Basic)</span></span>](../../../visual-basic/language-reference/statements/synclock-statement.md)
