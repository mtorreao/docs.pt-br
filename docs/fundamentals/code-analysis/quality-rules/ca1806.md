---
title: 'CA1806: não ignorar resultados do método (análise de código)'
description: 'Saiba mais sobre a regra de análise de código CA1806: não ignore os resultados do método'
ms.date: 06/08/2020
ms.topic: reference
f1_keywords:
- CA1806
- DoNotIgnoreMethodResults
helpviewer_keywords:
- CA1806
- DoNotIgnoreMethodResults
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: db0e940249fbf41ac1df9f7e133a04ad3d646260
ms.sourcegitcommit: a6bd4cad438fe479cbd112eae10f2cd449f06e40
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/08/2020
ms.locfileid: "96585438"
---
# <a name="ca1806-do-not-ignore-method-results"></a><span data-ttu-id="1c0bc-103">CA1806: Não ignorar resultados do método</span><span class="sxs-lookup"><span data-stu-id="1c0bc-103">CA1806: Do not ignore method results</span></span>

| | <span data-ttu-id="1c0bc-104">Valor</span><span class="sxs-lookup"><span data-stu-id="1c0bc-104">Value</span></span> |
|-|-|
| <span data-ttu-id="1c0bc-105">**ID da regra**</span><span class="sxs-lookup"><span data-stu-id="1c0bc-105">**Rule ID**</span></span> |<span data-ttu-id="1c0bc-106">CA1806</span><span class="sxs-lookup"><span data-stu-id="1c0bc-106">CA1806</span></span>|
| <span data-ttu-id="1c0bc-107">**Categoria**</span><span class="sxs-lookup"><span data-stu-id="1c0bc-107">**Category**</span></span> |<span data-ttu-id="1c0bc-108">Microsoft. Usage</span><span class="sxs-lookup"><span data-stu-id="1c0bc-108">Microsoft.Usage</span></span>|
| <span data-ttu-id="1c0bc-109">**A correção está sendo interrompida ou não está sendo interrompida**</span><span class="sxs-lookup"><span data-stu-id="1c0bc-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="1c0bc-110">Sem interrupção</span><span class="sxs-lookup"><span data-stu-id="1c0bc-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="1c0bc-111">Causa</span><span class="sxs-lookup"><span data-stu-id="1c0bc-111">Cause</span></span>

<span data-ttu-id="1c0bc-112">Há vários motivos possíveis para esse aviso:</span><span class="sxs-lookup"><span data-stu-id="1c0bc-112">There are several possible reasons for this warning:</span></span>

- <span data-ttu-id="1c0bc-113">Um novo objeto é criado, mas nunca é usado.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-113">A new object is created but never used.</span></span>

- <span data-ttu-id="1c0bc-114">Um método que cria e retorna uma nova cadeia de caracteres é chamado e a nova cadeia de caracteres nunca é usada.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-114">A method that creates and returns a new string is called and the new string is never used.</span></span>

- <span data-ttu-id="1c0bc-115">Um método COM ou P/Invoke que retorna um `HRESULT` código de erro ou que nunca é usado.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-115">A COM or P/Invoke method that returns a `HRESULT` or error code that is never used.</span></span>

- <span data-ttu-id="1c0bc-116">Um método de consulta integrada à linguagem (LINQ) que retorna um resultado que nunca é usado.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-116">A language-integrated query (LINQ) method that returns a result that is never used.</span></span>

## <a name="rule-description"></a><span data-ttu-id="1c0bc-117">Descrição da regra</span><span class="sxs-lookup"><span data-stu-id="1c0bc-117">Rule description</span></span>

<span data-ttu-id="1c0bc-118">Criação de objeto desnecessária e a coleta de lixo associada do desempenho degradado do objeto não utilizado.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-118">Unnecessary object creation and the associated garbage collection of the unused object degrade performance.</span></span>

<span data-ttu-id="1c0bc-119">As cadeias de caracteres são imutáveis e métodos como String. ToUpper retorna uma nova instância de uma cadeia de caracteres em vez de modificar a instância da cadeia de caracteres no método de chamada.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-119">Strings are immutable and methods such as String.ToUpper returns a new instance of a string instead of modifying the instance of the string in the calling method.</span></span>

<span data-ttu-id="1c0bc-120">Ignorar `HRESULT` ou código de erro pode levar a um comportamento inesperado em condições de erro ou a condições de poucos recursos.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-120">Ignoring `HRESULT` or error code can lead to unexpected behavior in error conditions or to low-resource conditions.</span></span>

<span data-ttu-id="1c0bc-121">Os métodos LINQ são conhecidos por não terem efeitos colaterais e o resultado não deve ser ignorado.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-121">LINQ methods are known to not have side effects, and the result should not be ignored.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="1c0bc-122">Como corrigir violações</span><span class="sxs-lookup"><span data-stu-id="1c0bc-122">How to fix violations</span></span>

<span data-ttu-id="1c0bc-123">Se o método A cria uma nova instância do objeto B que nunca é usado, passe a instância como um argumento para outro método ou atribua a instância a uma variável.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-123">If method A creates a new instance of B object that is never used, pass the instance as an argument to another method or assign the instance to a variable.</span></span> <span data-ttu-id="1c0bc-124">Se a criação do objeto for desnecessária, remova-o.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-124">If the object creation is unnecessary, remove the it.</span></span>

<span data-ttu-id="1c0bc-125">- ou -</span><span class="sxs-lookup"><span data-stu-id="1c0bc-125">-or-</span></span>

<span data-ttu-id="1c0bc-126">Se o método A chama o método B, mas não usa a nova instância de cadeia de caracteres que o método B retorna, passe a instância como um argumento para outro método, atribua a instância a uma variável.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-126">If method A calls method B, but does not use the new string instance that the method B returns, pass the instance as an argument to another method, assign the instance to a variable.</span></span> <span data-ttu-id="1c0bc-127">Ou remova a chamada se ela for desnecessária.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-127">Or remove the call if it is unnecessary.</span></span>

<span data-ttu-id="1c0bc-128">- ou -</span><span class="sxs-lookup"><span data-stu-id="1c0bc-128">-or-</span></span>

<span data-ttu-id="1c0bc-129">Se o método A chama o método B, mas não usa o `HRESULT` código de erro ou que o método retorna, use o resultado em uma instrução condicional, atribua o resultado a uma variável ou passe-o como um argumento para outro método.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-129">If method A calls method B, but does not use the `HRESULT` or error code that the method returns, use the result in a conditional statement, assign the result to a variable, or pass it as an argument to another method.</span></span>

<span data-ttu-id="1c0bc-130">- ou -</span><span class="sxs-lookup"><span data-stu-id="1c0bc-130">-or-</span></span>

<span data-ttu-id="1c0bc-131">Se um método LINQ A chamar o método B, mas não usar o resultado, use o resultado em uma instrução condicional, atribua o resultado a uma variável ou passe-o como um argumento para outro método.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-131">If a LINQ method A calls method B, but does not use the result, use the result in a conditional statement, assign the result to a variable, or pass it as an argument to another method.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="1c0bc-132">Quando suprimir avisos</span><span class="sxs-lookup"><span data-stu-id="1c0bc-132">When to suppress warnings</span></span>

<span data-ttu-id="1c0bc-133">Não suprimir um aviso dessa regra, a menos que o ato de criar o objeto atenda a alguma finalidade.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-133">Do not suppress a warning from this rule unless the act of creating the object serves some purpose.</span></span>

## <a name="example-1"></a><span data-ttu-id="1c0bc-134">Exemplo 1</span><span class="sxs-lookup"><span data-stu-id="1c0bc-134">Example 1</span></span>

<span data-ttu-id="1c0bc-135">O exemplo a seguir mostra uma classe que ignora o resultado da chamada de String. Trim.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-135">The following example shows a class that ignores the result of calling String.Trim.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet1":::

:::code language="vb" source="snippets/vb/all-rules/ca1806-do-not-ignore-method-results_1.vb" id="snippet1":::

## <a name="example-2"></a><span data-ttu-id="1c0bc-136">Exemplo 2</span><span class="sxs-lookup"><span data-stu-id="1c0bc-136">Example 2</span></span>

<span data-ttu-id="1c0bc-137">O exemplo a seguir corrige a violação anterior, atribuindo o resultado de String. Trim de volta à variável em que foi chamada.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-137">The following example fixes the previous violation by assigning the result of String.Trim back to the variable it was called on.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet2":::

:::code language="vb" source="snippets/vb/all-rules/ca1806-do-not-ignore-method-results_1.vb" id="snippet2":::

## <a name="example-3"></a><span data-ttu-id="1c0bc-138">Exemplo 3</span><span class="sxs-lookup"><span data-stu-id="1c0bc-138">Example 3</span></span>

<span data-ttu-id="1c0bc-139">O exemplo a seguir mostra um método que não usa um objeto que ele cria.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-139">The following example shows a method that does not use an object that it creates.</span></span>

> [!NOTE]
> <span data-ttu-id="1c0bc-140">Essa violação não pode ser reproduzida no Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-140">This violation cannot be reproduced in Visual Basic.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet3":::

## <a name="example-4"></a><span data-ttu-id="1c0bc-141">Exemplo 4</span><span class="sxs-lookup"><span data-stu-id="1c0bc-141">Example 4</span></span>

<span data-ttu-id="1c0bc-142">O exemplo a seguir corrige a violação anterior, removendo a criação desnecessária de um objeto.</span><span class="sxs-lookup"><span data-stu-id="1c0bc-142">The following example fixes the previous violation by removing the unnecessary creation of an object.</span></span>

:::code language="csharp" source="snippets/csharp/all-rules/ca1806.cs" id="snippet4":::

<!-- Examples don't exist for the following...

The following example shows a method that ignores the error code that the native method GetShortPathName returns.

The following example fixes the previous violation by checking the error code and throwing an exception when the call fails.
-->
