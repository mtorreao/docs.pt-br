---
title: 'CA3076: execução de script XSLT não segura (análise de código)'
description: 'Saiba mais sobre a regra de análise de código CA3076: execução de script XSLT insegura'
ms.date: 11/04/2016
ms.topic: reference
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 1dcb79f0d74e9d2d5eb83e87eeddeb4a07aecace
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/25/2020
ms.locfileid: "96584795"
---
# <a name="ca3076-insecure-xslt-script-execution"></a><span data-ttu-id="4d2fd-103">CA3076: Execução de script XSLT não seguro</span><span class="sxs-lookup"><span data-stu-id="4d2fd-103">CA3076: Insecure XSLT Script Execution</span></span>

| | <span data-ttu-id="4d2fd-104">Valor</span><span class="sxs-lookup"><span data-stu-id="4d2fd-104">Value</span></span> |
|-|-|
| <span data-ttu-id="4d2fd-105">**ID da regra**</span><span class="sxs-lookup"><span data-stu-id="4d2fd-105">**Rule ID**</span></span> |<span data-ttu-id="4d2fd-106">CA3076</span><span class="sxs-lookup"><span data-stu-id="4d2fd-106">CA3076</span></span>|
| <span data-ttu-id="4d2fd-107">**Categoria**</span><span class="sxs-lookup"><span data-stu-id="4d2fd-107">**Category**</span></span> |<span data-ttu-id="4d2fd-108">Microsoft.Security</span><span class="sxs-lookup"><span data-stu-id="4d2fd-108">Microsoft.Security</span></span>|
| <span data-ttu-id="4d2fd-109">**A correção está sendo interrompida ou não está sendo interrompida**</span><span class="sxs-lookup"><span data-stu-id="4d2fd-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="4d2fd-110">Sem interrupção</span><span class="sxs-lookup"><span data-stu-id="4d2fd-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="4d2fd-111">Causa</span><span class="sxs-lookup"><span data-stu-id="4d2fd-111">Cause</span></span>

<span data-ttu-id="4d2fd-112">Se você executar as transformações de linguagem de folhas de estilos extensível (XSLT) em aplicativos .NET de forma insegura, o processador poderá resolver referências de URI não confiáveis que poderiam divulgar informações confidenciais a invasores, levando à negação de serviço e a ataques entre sites.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-112">If you execute Extensible Stylesheets Language Transformations (XSLT) in .NET applications insecurely, the processor may resolve untrusted URI references that could disclose sensitive information to attackers, leading to Denial of Service and Cross-Site attacks.</span></span> <span data-ttu-id="4d2fd-113">Para obter mais informações, consulte [considerações de segurança do XSLT (guia. net)](../../../standard/data/xml/xslt-security-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="4d2fd-113">For more information, see [XSLT Security Considerations(.NET Guide)](../../../standard/data/xml/xslt-security-considerations.md).</span></span>

## <a name="rule-description"></a><span data-ttu-id="4d2fd-114">Descrição da regra</span><span class="sxs-lookup"><span data-stu-id="4d2fd-114">Rule description</span></span>

<span data-ttu-id="4d2fd-115">O **XSLT** é um padrão World Wide Web CONSORTIUM (W3C) para transformar dados XML.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-115">**XSLT** is a World Wide Web Consortium (W3C) standard for transforming XML data.</span></span> <span data-ttu-id="4d2fd-116">Normalmente, o XSLT é usado para gravar folhas de estilo para transformar dados XML em outros formatos, como HTML, texto de comprimento fixo, texto separado por vírgula ou um formato XML diferente.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-116">XSLT is typically used to write style sheets to transform XML data to other formats such as HTML, fixed-length text, comma-separated text, or a different XML format.</span></span> <span data-ttu-id="4d2fd-117">Embora seja proibido por padrão, você pode optar por habilitá-lo para seu projeto.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-117">Although prohibited by default, you may choose to enable it for your project.</span></span>

<span data-ttu-id="4d2fd-118">Para garantir que você não esteja expondo uma superfície de ataque, essa regra é disparada sempre que XslCompiledTransform.<xref:System.Xml.Xsl.XslCompiledTransform.Load%2A></span><span class="sxs-lookup"><span data-stu-id="4d2fd-118">To ensure you're not exposing an attack surface, this rule triggers whenever the XslCompiledTransform.<xref:System.Xml.Xsl.XslCompiledTransform.Load%2A></span></span> <span data-ttu-id="4d2fd-119">recebe instâncias de combinação não seguras do <xref:System.Xml.Xsl.XsltSettings> e <xref:System.Xml.XmlResolver> , o que permite o processamento de script mal-intencionado.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-119">receives insecure combination instances of <xref:System.Xml.Xsl.XsltSettings> and <xref:System.Xml.XmlResolver>, which allows malicious script processing.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="4d2fd-120">Como corrigir violações</span><span class="sxs-lookup"><span data-stu-id="4d2fd-120">How to fix violations</span></span>

- <span data-ttu-id="4d2fd-121">Substitua o argumento XsltSettings inseguro por XsltSettings.<xref:System.Xml.Xsl.XsltSettings.Default%2A></span><span class="sxs-lookup"><span data-stu-id="4d2fd-121">Replace the insecure XsltSettings argument with XsltSettings.<xref:System.Xml.Xsl.XsltSettings.Default%2A></span></span> <span data-ttu-id="4d2fd-122">ou com uma instância que tenha desabilitado a função de documento e a execução de script.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-122">or with an instance that has disabled document function and script execution.</span></span>

- <span data-ttu-id="4d2fd-123">Substitua o <xref:System.Xml.XmlResolver> argumento por um nulo ou uma <xref:System.Xml.XmlSecureResolver> instância.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-123">Replace the <xref:System.Xml.XmlResolver> argument with null or an <xref:System.Xml.XmlSecureResolver> instance.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="4d2fd-124">Quando suprimir avisos</span><span class="sxs-lookup"><span data-stu-id="4d2fd-124">When to suppress warnings</span></span>

<span data-ttu-id="4d2fd-125">A menos que você tenha certeza de que a entrada é conhecida por ser de uma fonte confiável, não omita uma regra desse aviso.</span><span class="sxs-lookup"><span data-stu-id="4d2fd-125">Unless you're sure that the input is known to be from a trusted source, do not suppress a rule from this warning.</span></span>

## <a name="pseudo-code-examples"></a><span data-ttu-id="4d2fd-126">Exemplos de pseudocódigo</span><span class="sxs-lookup"><span data-stu-id="4d2fd-126">Pseudo-code examples</span></span>

### <a name="violation-that-uses-xsltsettingstrustedxslt"></a><span data-ttu-id="4d2fd-127">Violação que usa XsltSettings. TrustedXslt</span><span class="sxs-lookup"><span data-stu-id="4d2fd-127">Violation that uses XsltSettings.TrustedXslt</span></span>

```csharp
using System.Xml;
using System.Xml.Xsl;

namespace TestNamespace
{
    class TestClass
    {
         void TestMethod()
        {
             XslCompiledTransform xslCompiledTransform = new XslCompiledTransform();
             var settings = XsltSettings.TrustedXslt;
             var resolver = new XmlUrlResolver();
             xslCompiledTransform.Load("testStylesheet", settings, resolver); // warn
        }
    }
}
```

### <a name="solution-that-uses-xsltsettingsdefault"></a><span data-ttu-id="4d2fd-128">Solução que usa XsltSettings. Default</span><span class="sxs-lookup"><span data-stu-id="4d2fd-128">Solution that uses XsltSettings.Default</span></span>

```csharp
using System.Xml;
using System.Xml.Xsl;

namespace TestNamespace
{
    class TestClass
    {
        void TestMethod()
        {
            XslCompiledTransform xslCompiledTransform = new XslCompiledTransform();
            var settings = XsltSettings.Default;
            var resolver = new XmlUrlResolver();
            xslCompiledTransform.Load("testStylesheet", settings, resolver);
        }
    }
}
```

### <a name="violationmdashdocument-function-and-script-execution-not-disabled"></a><span data-ttu-id="4d2fd-129">Violação &mdash; de função de documento e execução de script não desabilitada</span><span class="sxs-lookup"><span data-stu-id="4d2fd-129">Violation&mdash;document function and script execution not disabled</span></span>

```csharp
using System.Xml;
using System.Xml.Xsl;

namespace TestNamespace
{
    class TestClass
    {
        private static void TestMethod(XsltSettings settings)
        {
            try
            {
                XslCompiledTransform xslCompiledTransform = new XslCompiledTransform();
                var resolver = new XmlUrlResolver();
                xslCompiledTransform.Load("testStylesheet", settings, resolver); // warn
            }
            catch { throw; }
            finally { }
        }
    }
}
```

### <a name="solutionmdashdisable-document-function-and-script-execution"></a><span data-ttu-id="4d2fd-130">Solução &mdash; desabilite a execução de script e função de documento</span><span class="sxs-lookup"><span data-stu-id="4d2fd-130">Solution&mdash;disable document function and script execution</span></span>

```csharp
using System.Xml;
using System.Xml.Xsl;

namespace TestNamespace
{
    class TestClass
    {
        private static void TestMethod(XsltSettings settings)
        {
            try
            {
                XslCompiledTransform xslCompiledTransform = new XslCompiledTransform();
                settings.EnableDocumentFunction = false;
                settings.EnableScript = false;
                var resolver = new XmlUrlResolver();
                xslCompiledTransform.Load("testStylesheet", settings, resolver);
            }
            catch { throw; }
            finally { }
        }
    }
}
```

## <a name="see-also"></a><span data-ttu-id="4d2fd-131">Confira também</span><span class="sxs-lookup"><span data-stu-id="4d2fd-131">See also</span></span>

- [<span data-ttu-id="4d2fd-132">Considerações de segurança XSLT (guia. NET)</span><span class="sxs-lookup"><span data-stu-id="4d2fd-132">XSLT Security Considerations(.NET Guide)</span></span>](../../../standard/data/xml/xslt-security-considerations.md)
