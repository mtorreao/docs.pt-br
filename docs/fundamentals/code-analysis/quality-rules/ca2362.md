---
title: 'CA2362: DataSet ou DataTable não seguro em tipo serializável gerado automaticamente pode ser vulnerável a ataques de execução remota de código (análise de código)'
description: 'Saiba mais sobre a regra de análise de código CA2362: um conjunto de informações não seguro ou DataTable em tipo serializável gerado automaticamente pode ser vulnerável a ataques de execução remota de código'
ms.date: 08/11/2020
ms.topic: reference
author: dotpaul
ms.author: paulming
dev_langs:
- CSharp
f1_keywords:
- CA2362
ms.openlocfilehash: 42a5c8ad6e87dc6d414fad2edae355c9ef5c24a7
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/25/2020
ms.locfileid: "96584684"
---
# <a name="ca2362-unsafe-dataset-or-datatable-in-autogenerated-serializable-type-can-be-vulnerable-to-remote-code-execution-attacks"></a>CA2362: DataSet ou DataTable não seguros em um tipo serializável gerado automaticamente podem ser vulneráveis a ataques de execução remota de código

| | Valor |
|-|-|
| **ID da regra** |CA2362|
| **Categoria** |Microsoft.Security|
| **A correção está sendo interrompida ou não está sendo interrompida** |Sem interrupção|

## <a name="cause"></a>Causa

Uma classe ou estrutura marcada com <xref:System.SerializableAttribute> contém um <xref:System.Data.DataSet> <xref:System.Data.DataTable> campo ou propriedade, e tem um <xref:System.ComponentModel.DesignerCategoryAttribute> .

[CA2352](ca2352.md) é uma regra semelhante, por quando não há um <xref:System.ComponentModel.DesignerCategoryAttribute> .

## <a name="rule-description"></a>Descrição da regra

Ao desserializar a entrada não confiável com <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> o e o grafo de objeto desserializado contiver um <xref:System.Data.DataSet> ou <xref:System.Data.DataTable> , um invasor poderá criar uma carga mal-intencionada para executar um ataque de execução remota de código.

Essa regra é como [CA2352](ca2352.md), mas para código gerado automaticamente para uma representação de dados na memória em um aplicativo de GUI. Normalmente, essas classes geradas automaticamente não são desserializadas de entrada não confiável. O uso do seu aplicativo pode variar.

Essa regra localiza tipos que são inseguros quando desserializados. Se seu código não desserializar os tipos encontrados, você não terá uma vulnerabilidade de desserialização.

Para obter mais informações, consulte [diretrizes de segurança do conjunto de dados e DataTable](https://go.microsoft.com/fwlink/?linkid=2132227).

## <a name="how-to-fix-violations"></a>Como corrigir violações

- Se possível, use [Entity Framework](/ef/) em vez de <xref:System.Data.DataSet> e <xref:System.Data.DataTable> .
- Torne a prova de adulteração dos dados serializados. Após a serialização, assine criptograficamente os dados serializados. Antes da desserialização, valide a assinatura criptográfica. Proteja a chave de criptografia de ser divulgada e design para rotações de chave.

## <a name="when-to-suppress-warnings"></a>Quando suprimir avisos

É seguro suprimir um aviso dessa regra:

- O tipo encontrado por essa regra nunca é desserializado, direta ou indiretamente.
- Você sabe que a entrada é confiável. Considere que o limite de confiança do seu aplicativo e os fluxos de dados podem mudar ao longo do tempo.
- Você tomou uma das precauções em [como corrigir violações](#how-to-fix-violations).

## <a name="pseudo-code-examples"></a>Exemplos de pseudocódigo

### <a name="violation"></a>Infra

```csharp
using System.Data;
using System.Xml.Serialization;

namespace ExampleNamespace
{
    [global::System.CodeDom.Compiler.GeneratedCode(""System.Data.Design.TypedDataSetGenerator"", ""2.0.0.0"")]
    [global::System.Serializable()]
    [global::System.ComponentModel.DesignerCategoryAttribute(""code"")]
    [global::System.ComponentModel.ToolboxItem(true)]
    [global::System.Xml.Serialization.XmlSchemaProviderAttribute(""GetTypedDataSetSchema"")]
    [global::System.Xml.Serialization.XmlRootAttribute(""Package"")]
    [global::System.ComponentModel.Design.HelpKeywordAttribute(""vs.data.DataSet"")]
    public class ExampleClass : global::System.Data.DataSet {
        private DataTable table;
    }
}
```

## <a name="related-rules"></a>Regras relacionadas

[CA2350: verifique se a entrada do DataTable.ReadXml() é confiável](ca2350.md)

[CA2351: verifique se a entrada do DataSet.ReadXml() é confiável](ca2351.md)

[CA2352: DataSet ou DataTable não seguros no tipo serializável podem ser vulneráveis a ataques de execução de código remoto](ca2352.md)

[CA2353: DataSet ou DataTable não seguros no tipo serializável](ca2353.md)

[CA2354: DataSet ou DataTable não seguros no grafo de objetos desserializados podem ser vulneráveis a ataques de execução de código remoto](ca2354.md)

[CA2355: DataSet ou DataTable não seguros no grafo de objetos desserializados](ca2355.md)

[CA2356: DataSet não seguro ou DataTable no grafo de objeto desserializado da Web](ca2356.md)

[CA2362: DataSet ou DataTable não seguros em um tipo serializável gerado automaticamente podem ser vulneráveis a ataques de execução remota de código](ca2362.md)
