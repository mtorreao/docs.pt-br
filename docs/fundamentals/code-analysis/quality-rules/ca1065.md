---
title: 'CA1065: não gerar exceções em locais inesperados (análise de código)'
description: 'Saiba mais sobre a regra de análise de código CA1065: não gerar exceções em locais inesperados'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1065
- DoNotRaiseExceptionsInUnexpectedLocations
helpviewer_keywords:
- DoNotRaiseExceptionsInUnexpectedLocations
- CA1065
author: gewarren
ms.author: gewarren
ms.openlocfilehash: ab1c49127c45fdf730c717f1e2ba8652e2723ace
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/25/2020
ms.locfileid: "96584983"
---
# <a name="ca1065-do-not-raise-exceptions-in-unexpected-locations"></a><span data-ttu-id="3bbe8-103">CA1065: Não acionar exceções em locais inesperados</span><span class="sxs-lookup"><span data-stu-id="3bbe8-103">CA1065: Do not raise exceptions in unexpected locations</span></span>

| | <span data-ttu-id="3bbe8-104">Valor</span><span class="sxs-lookup"><span data-stu-id="3bbe8-104">Value</span></span> |
|-|-|
| <span data-ttu-id="3bbe8-105">**ID da regra**</span><span class="sxs-lookup"><span data-stu-id="3bbe8-105">**Rule ID**</span></span> |<span data-ttu-id="3bbe8-106">CA1065</span><span class="sxs-lookup"><span data-stu-id="3bbe8-106">CA1065</span></span>|
| <span data-ttu-id="3bbe8-107">**Categoria**</span><span class="sxs-lookup"><span data-stu-id="3bbe8-107">**Category**</span></span> |<span data-ttu-id="3bbe8-108">Microsoft. Design</span><span class="sxs-lookup"><span data-stu-id="3bbe8-108">Microsoft.Design</span></span>|
| <span data-ttu-id="3bbe8-109">**A correção está sendo interrompida ou não está sendo interrompida**</span><span class="sxs-lookup"><span data-stu-id="3bbe8-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="3bbe8-110">Sem interrupção</span><span class="sxs-lookup"><span data-stu-id="3bbe8-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="3bbe8-111">Causa</span><span class="sxs-lookup"><span data-stu-id="3bbe8-111">Cause</span></span>

<span data-ttu-id="3bbe8-112">Um método que não deve acionar exceções aciona uma exceção.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-112">A method that is not expected to throw exceptions throws an exception.</span></span>

## <a name="rule-description"></a><span data-ttu-id="3bbe8-113">Descrição da regra</span><span class="sxs-lookup"><span data-stu-id="3bbe8-113">Rule description</span></span>

<span data-ttu-id="3bbe8-114">Métodos que não devem lançar exceções podem ser categorizados da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="3bbe8-114">Methods that are not expected to throw exceptions can be categorized as follows:</span></span>

- <span data-ttu-id="3bbe8-115">Métodos get da propriedade</span><span class="sxs-lookup"><span data-stu-id="3bbe8-115">Property Get Methods</span></span>

- <span data-ttu-id="3bbe8-116">Métodos de acessadores de eventos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-116">Event Accessor Methods</span></span>

- <span data-ttu-id="3bbe8-117">Métodos iguais</span><span class="sxs-lookup"><span data-stu-id="3bbe8-117">Equals Methods</span></span>

- <span data-ttu-id="3bbe8-118">Métodos GetHashCode</span><span class="sxs-lookup"><span data-stu-id="3bbe8-118">GetHashCode Methods</span></span>

- <span data-ttu-id="3bbe8-119">Métodos ToString</span><span class="sxs-lookup"><span data-stu-id="3bbe8-119">ToString Methods</span></span>

- <span data-ttu-id="3bbe8-120">Construtores estáticos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-120">Static Constructors</span></span>

- <span data-ttu-id="3bbe8-121">Finalizadores</span><span class="sxs-lookup"><span data-stu-id="3bbe8-121">Finalizers</span></span>

- <span data-ttu-id="3bbe8-122">Métodos Dispose</span><span class="sxs-lookup"><span data-stu-id="3bbe8-122">Dispose Methods</span></span>

- <span data-ttu-id="3bbe8-123">Operadores de igualdade</span><span class="sxs-lookup"><span data-stu-id="3bbe8-123">Equality Operators</span></span>

- <span data-ttu-id="3bbe8-124">Operadores de conversão implícita</span><span class="sxs-lookup"><span data-stu-id="3bbe8-124">Implicit Cast Operators</span></span>

<span data-ttu-id="3bbe8-125">As seções a seguir discutem esses tipos de método.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-125">The following sections discuss these method types.</span></span>

### <a name="property-get-methods"></a><span data-ttu-id="3bbe8-126">Métodos get da propriedade</span><span class="sxs-lookup"><span data-stu-id="3bbe8-126">Property Get Methods</span></span>

<span data-ttu-id="3bbe8-127">As propriedades são basicamente campos inteligentes.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-127">Properties are basically smart fields.</span></span> <span data-ttu-id="3bbe8-128">Portanto, eles devem se comportar como um campo o máximo possível.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-128">Therefore, they should behave like a field as much as possible.</span></span> <span data-ttu-id="3bbe8-129">Os campos não geram exceções e nenhuma das propriedades.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-129">Fields don't throw exceptions and neither should properties.</span></span> <span data-ttu-id="3bbe8-130">Se você tiver uma propriedade que gera uma exceção, considere torná-la um método.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-130">If you have a property that throws an exception, consider making it a method.</span></span>

<span data-ttu-id="3bbe8-131">As seguintes exceções podem ser geradas de um método Get de propriedade:</span><span class="sxs-lookup"><span data-stu-id="3bbe8-131">The following exceptions can be thrown from a property get method:</span></span>

- <span data-ttu-id="3bbe8-132"><xref:System.InvalidOperationException?displayProperty=fullName> e todos os derivativos (incluindo <xref:System.ObjectDisposedException?displayProperty=fullName> )</span><span class="sxs-lookup"><span data-stu-id="3bbe8-132"><xref:System.InvalidOperationException?displayProperty=fullName> and all derivatives (including <xref:System.ObjectDisposedException?displayProperty=fullName>)</span></span>

- <span data-ttu-id="3bbe8-133"><xref:System.NotSupportedException?displayProperty=fullName> e todos os derivativos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-133"><xref:System.NotSupportedException?displayProperty=fullName> and all derivatives</span></span>

- <span data-ttu-id="3bbe8-134"><xref:System.ArgumentException?displayProperty=fullName> (somente de Get indexado)</span><span class="sxs-lookup"><span data-stu-id="3bbe8-134"><xref:System.ArgumentException?displayProperty=fullName> (only from indexed get)</span></span>

- <span data-ttu-id="3bbe8-135"><xref:System.Collections.Generic.KeyNotFoundException> (somente de Get indexado)</span><span class="sxs-lookup"><span data-stu-id="3bbe8-135"><xref:System.Collections.Generic.KeyNotFoundException> (only from indexed get)</span></span>

### <a name="event-accessor-methods"></a><span data-ttu-id="3bbe8-136">Métodos de acessadores de eventos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-136">Event Accessor Methods</span></span>

<span data-ttu-id="3bbe8-137">Os acessadores de evento devem ser operações simples que não lançam exceções.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-137">Event accessors should be simple operations that don't throw exceptions.</span></span> <span data-ttu-id="3bbe8-138">Um evento não deve gerar uma exceção quando você tenta adicionar ou remover um manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-138">An event should not throw an exception when you try to add or remove an event handler.</span></span>

<span data-ttu-id="3bbe8-139">As seguintes exceções podem ser geradas de um acessador de eventos:</span><span class="sxs-lookup"><span data-stu-id="3bbe8-139">The following exceptions can be thrown from an event accessor:</span></span>

- <span data-ttu-id="3bbe8-140"><xref:System.InvalidOperationException?displayProperty=fullName> e todos os derivativos (incluindo <xref:System.ObjectDisposedException?displayProperty=fullName> )</span><span class="sxs-lookup"><span data-stu-id="3bbe8-140"><xref:System.InvalidOperationException?displayProperty=fullName> and all derivatives (including <xref:System.ObjectDisposedException?displayProperty=fullName>)</span></span>

- <span data-ttu-id="3bbe8-141"><xref:System.NotSupportedException?displayProperty=fullName> e todos os derivativos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-141"><xref:System.NotSupportedException?displayProperty=fullName> and all derivatives</span></span>

- <span data-ttu-id="3bbe8-142"><xref:System.ArgumentException> e derivativos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-142"><xref:System.ArgumentException> and derivatives</span></span>

### <a name="equals-methods"></a><span data-ttu-id="3bbe8-143">Métodos iguais</span><span class="sxs-lookup"><span data-stu-id="3bbe8-143">Equals Methods</span></span>

<span data-ttu-id="3bbe8-144">Os métodos **iguais** a seguir não devem gerar exceções:</span><span class="sxs-lookup"><span data-stu-id="3bbe8-144">The following **Equals** methods should not throw exceptions:</span></span>

- <xref:System.Object.Equals%2A?displayProperty=fullName>

- <xref:System.IEquatable%601.Equals%2A>

<span data-ttu-id="3bbe8-145">Um método **Equals** deve retornar `true` ou `false` em vez de lançar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-145">An **Equals** method should return `true` or `false` instead of throwing an exception.</span></span> <span data-ttu-id="3bbe8-146">Por exemplo, se Equals for passado dois tipos incompatíveis, ele deverá retornar apenas `false` em vez de lançar um <xref:System.ArgumentException> .</span><span class="sxs-lookup"><span data-stu-id="3bbe8-146">For example, if Equals is passed two mismatched types it should just return `false` instead of throwing an <xref:System.ArgumentException>.</span></span>

### <a name="gethashcode-methods"></a><span data-ttu-id="3bbe8-147">Métodos GetHashCode</span><span class="sxs-lookup"><span data-stu-id="3bbe8-147">GetHashCode Methods</span></span>

<span data-ttu-id="3bbe8-148">Os seguintes métodos **GetHashCode** normalmente não devem gerar exceções:</span><span class="sxs-lookup"><span data-stu-id="3bbe8-148">The following **GetHashCode** methods should usually not throw exceptions:</span></span>

- <xref:System.Object.GetHashCode%2A>

- <xref:System.Collections.IEqualityComparer.GetHashCode%2A>

<span data-ttu-id="3bbe8-149">**GetHashCode** sempre deve retornar um valor.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-149">**GetHashCode** should always return a value.</span></span> <span data-ttu-id="3bbe8-150">Caso contrário, você pode perder itens na tabela de hash.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-150">Otherwise, you can lose items in the hash table.</span></span>

<span data-ttu-id="3bbe8-151">As versões de **GetHashCode** que usam um argumento podem lançar um <xref:System.ArgumentException> .</span><span class="sxs-lookup"><span data-stu-id="3bbe8-151">The versions of **GetHashCode** that take an argument can throw an <xref:System.ArgumentException>.</span></span> <span data-ttu-id="3bbe8-152">No entanto, **Object. GetHashCode** nunca deve gerar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-152">However, **Object.GetHashCode** should never throw an exception.</span></span>

### <a name="tostring-methods"></a><span data-ttu-id="3bbe8-153">Métodos ToString</span><span class="sxs-lookup"><span data-stu-id="3bbe8-153">ToString Methods</span></span>

<span data-ttu-id="3bbe8-154">O depurador usa <xref:System.Object.ToString%2A?displayProperty=fullName> para ajudar a exibir informações sobre objetos no formato de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-154">The debugger uses <xref:System.Object.ToString%2A?displayProperty=fullName> to help display information about objects in string format.</span></span> <span data-ttu-id="3bbe8-155">Portanto, o **ToString** não deve alterar o estado de um objeto e não deve gerar exceções.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-155">Therefore, **ToString** should not change the state of an object, and it shouldn't throw exceptions.</span></span>

### <a name="static-constructors"></a><span data-ttu-id="3bbe8-156">Construtores estáticos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-156">Static Constructors</span></span>

<span data-ttu-id="3bbe8-157">Lançar exceções de um construtor estático faz com que o tipo seja inutilizável no domínio do aplicativo atual.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-157">Throwing exceptions from a static constructor causes the type to be unusable in the current application domain.</span></span> <span data-ttu-id="3bbe8-158">Você deve ter um bom motivo (como um problema de segurança) para lançar uma exceção de um construtor estático.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-158">You should have a good reason (such as a security issue) for throwing an exception from a static constructor.</span></span>

### <a name="finalizers"></a><span data-ttu-id="3bbe8-159">Finalizadores</span><span class="sxs-lookup"><span data-stu-id="3bbe8-159">Finalizers</span></span>

<span data-ttu-id="3bbe8-160">Lançar uma exceção de um finalizador faz com que o CLR fail fast, que destrói o processo.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-160">Throwing an exception from a finalizer causes the CLR to fail fast, which tears down the process.</span></span> <span data-ttu-id="3bbe8-161">Portanto, gerar exceções em um finalizador sempre deve ser evitado.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-161">Therefore, throwing exceptions in a finalizer should always be avoided.</span></span>

### <a name="dispose-methods"></a><span data-ttu-id="3bbe8-162">Métodos Dispose</span><span class="sxs-lookup"><span data-stu-id="3bbe8-162">Dispose Methods</span></span>

<span data-ttu-id="3bbe8-163">Um <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> método não deve gerar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-163">A <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> method should not throw an exception.</span></span> <span data-ttu-id="3bbe8-164">Dispose é geralmente chamado como parte da lógica de limpeza em uma `finally` cláusula.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-164">Dispose is often called as part of the cleanup logic in a `finally` clause.</span></span> <span data-ttu-id="3bbe8-165">Portanto, lançar explicitamente uma exceção de Dispose força o usuário a adicionar manipulação de exceção dentro da `finally` cláusula.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-165">Therefore, explicitly throwing an exception from Dispose forces the user to add exception handling inside the `finally` clause.</span></span>

<span data-ttu-id="3bbe8-166">O caminho do código **Dispose (false)** nunca deve gerar exceções, pois Dispose quase sempre é chamado de um finalizador.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-166">The **Dispose(false)** code path should never throw exceptions, because Dispose is almost always called from a finalizer.</span></span>

### <a name="equality-operators--"></a><span data-ttu-id="3bbe8-167">Operadores de igualdade (= =,! =)</span><span class="sxs-lookup"><span data-stu-id="3bbe8-167">Equality Operators (==, !=)</span></span>

<span data-ttu-id="3bbe8-168">Como os métodos Equals, operadores de igualdade devem retornar `true` ou `false` e e não devem gerar exceções.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-168">Like Equals methods, equality operators should return either `true` or `false`, and should not throw exceptions.</span></span>

### <a name="implicit-cast-operators"></a><span data-ttu-id="3bbe8-169">Operadores de conversão implícita</span><span class="sxs-lookup"><span data-stu-id="3bbe8-169">Implicit Cast Operators</span></span>

<span data-ttu-id="3bbe8-170">Como o usuário geralmente não está ciente de que um operador de conversão implícita foi chamado, uma exceção gerada pelo operador de conversão implícita é inesperada.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-170">Because the user is often unaware that an implicit cast operator has been called, an exception thrown by the implicit cast operator is unexpected.</span></span> <span data-ttu-id="3bbe8-171">Portanto, nenhuma exceção deve ser gerada de operadores de conversão implícitos.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-171">Therefore, no exceptions should be thrown from implicit cast operators.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="3bbe8-172">Como corrigir violações</span><span class="sxs-lookup"><span data-stu-id="3bbe8-172">How to fix violations</span></span>

<span data-ttu-id="3bbe8-173">Para getters de propriedade, altere a lógica para que ela não precise mais lançar uma exceção ou altere a propriedade para um método.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-173">For property getters, either change the logic so that it no longer has to throw an exception, or change the property into a method.</span></span>

<span data-ttu-id="3bbe8-174">Para todos os outros tipos de método listados anteriormente, altere a lógica para que ela não deva mais lançar uma exceção.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-174">For all other method types listed previously, change the logic so that it no longer must throw an exception.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="3bbe8-175">Quando suprimir avisos</span><span class="sxs-lookup"><span data-stu-id="3bbe8-175">When to suppress warnings</span></span>

<span data-ttu-id="3bbe8-176">Se a violação foi causada por uma declaração de exceção em vez de uma exceção gerada, é seguro suprimir um aviso dessa regra.</span><span class="sxs-lookup"><span data-stu-id="3bbe8-176">If the violation was caused by an exception declaration instead of a thrown exception, it is safe to suppress a warning from this rule.</span></span>

## <a name="related-rules"></a><span data-ttu-id="3bbe8-177">Regras relacionadas</span><span class="sxs-lookup"><span data-stu-id="3bbe8-177">Related rules</span></span>

- [<span data-ttu-id="3bbe8-178">CA2219: Não acionar exceções em cláusulas de exceção</span><span class="sxs-lookup"><span data-stu-id="3bbe8-178">CA2219: Do not raise exceptions in exception clauses</span></span>](ca2219.md)

## <a name="see-also"></a><span data-ttu-id="3bbe8-179">Confira também</span><span class="sxs-lookup"><span data-stu-id="3bbe8-179">See also</span></span>

- [<span data-ttu-id="3bbe8-180">Regras de design</span><span class="sxs-lookup"><span data-stu-id="3bbe8-180">Design rules</span></span>](design-warnings.md)
