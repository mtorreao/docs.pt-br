---
title: 'CA1031: não capturar tipos de exceção geral (análise de código)'
description: 'Saiba mais sobre a regra de análise de código CA1031: não capturar tipos de exceção geral'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1031
- DoNotCatchGeneralExceptionTypes
helpviewer_keywords:
- CA1031
- DoNotCatchGeneralExceptionTypes
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 8cf705ec704f5afa6d962b7c22b6f60565a9f697
ms.sourcegitcommit: e301979e3049ce412d19b094c60ed95b316a8f8c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/16/2020
ms.locfileid: "97594664"
---
# <a name="ca1031-do-not-catch-general-exception-types"></a><span data-ttu-id="57a78-103">CA1031: Não capturar tipos de exceção geral</span><span class="sxs-lookup"><span data-stu-id="57a78-103">CA1031: Do not catch general exception types</span></span>

| <span data-ttu-id="57a78-104">Item</span><span class="sxs-lookup"><span data-stu-id="57a78-104">Item</span></span>                                     | <span data-ttu-id="57a78-105">Valor</span><span class="sxs-lookup"><span data-stu-id="57a78-105">Value</span></span>            |
|------------------------------------------|------------------|
| <span data-ttu-id="57a78-106">RuleId</span><span class="sxs-lookup"><span data-stu-id="57a78-106">RuleId</span></span>                                   | <span data-ttu-id="57a78-107">CA1031</span><span class="sxs-lookup"><span data-stu-id="57a78-107">CA1031</span></span>           |
| <span data-ttu-id="57a78-108">Categoria</span><span class="sxs-lookup"><span data-stu-id="57a78-108">Category</span></span>                                 | <span data-ttu-id="57a78-109">Microsoft. Design</span><span class="sxs-lookup"><span data-stu-id="57a78-109">Microsoft.Design</span></span> |
| <span data-ttu-id="57a78-110">A correção está sendo interrompida ou não está sendo interrompida</span><span class="sxs-lookup"><span data-stu-id="57a78-110">Fix is breaking or non-breaking</span></span> | <span data-ttu-id="57a78-111">Sem interrupção</span><span class="sxs-lookup"><span data-stu-id="57a78-111">Non-breaking</span></span>     |

## <a name="cause"></a><span data-ttu-id="57a78-112">Causa</span><span class="sxs-lookup"><span data-stu-id="57a78-112">Cause</span></span>

<span data-ttu-id="57a78-113">Uma exceção geral, como <xref:System.Exception?displayProperty=fullName> ou <xref:System.SystemException?displayProperty=fullName> é capturada em uma `catch` instrução, ou uma cláusula catch geral, como `catch()` é usada.</span><span class="sxs-lookup"><span data-stu-id="57a78-113">A general exception such as <xref:System.Exception?displayProperty=fullName> or <xref:System.SystemException?displayProperty=fullName> is caught in a `catch` statement, or a general catch clause such as `catch()` is used.</span></span>

<span data-ttu-id="57a78-114">Por padrão, essa regra sinaliza apenas os tipos de exceção geral que estão sendo capturados, mas isso é [configurável](#configure-code-to-analyze).</span><span class="sxs-lookup"><span data-stu-id="57a78-114">By default, this rule only flags general exception types being caught, but this is [configurable](#configure-code-to-analyze).</span></span>

## <a name="rule-description"></a><span data-ttu-id="57a78-115">Descrição da regra</span><span class="sxs-lookup"><span data-stu-id="57a78-115">Rule description</span></span>

<span data-ttu-id="57a78-116">As exceções gerais não devem ser capturadas.</span><span class="sxs-lookup"><span data-stu-id="57a78-116">General exceptions should not be caught.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="57a78-117">Como corrigir violações</span><span class="sxs-lookup"><span data-stu-id="57a78-117">How to fix violations</span></span>

<span data-ttu-id="57a78-118">Para corrigir uma violação dessa regra, Capture uma exceção mais específica ou relance a exceção geral como a última instrução no `catch` bloco.</span><span class="sxs-lookup"><span data-stu-id="57a78-118">To fix a violation of this rule, catch a more specific exception, or rethrow the general exception as the last statement in the `catch` block.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="57a78-119">Quando suprimir avisos</span><span class="sxs-lookup"><span data-stu-id="57a78-119">When to suppress warnings</span></span>

<span data-ttu-id="57a78-120">Não suprima um aviso nessa regra.</span><span class="sxs-lookup"><span data-stu-id="57a78-120">Do not suppress a warning from this rule.</span></span> <span data-ttu-id="57a78-121">A captura de tipos de exceção gerais pode ocultar os problemas de tempo de execução do usuário da biblioteca e tornar a depuração mais difícil.</span><span class="sxs-lookup"><span data-stu-id="57a78-121">Catching general exception types can hide run-time problems from the library user and can make debugging more difficult.</span></span>

> [!NOTE]
> <span data-ttu-id="57a78-122">A partir do .NET Framework 4, o Common Language Runtime (CLR) não entrega mais exceções de estado corrompido que ocorrem no sistema operacional e no código gerenciado, como violações de acesso no Windows, a serem manipuladas pelo código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="57a78-122">Starting with .NET Framework 4, the common language runtime (CLR) no longer delivers corrupted state exceptions that occur in the operating system and managed code, such as access violations in Windows, to be handled by managed code.</span></span> <span data-ttu-id="57a78-123">Se você quiser compilar um aplicativo no .NET Framework 4 ou versões posteriores e manter o tratamento de exceções de estado corrompidas, poderá aplicar o <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> atributo ao método que manipula a exceção de estado corrompido.</span><span class="sxs-lookup"><span data-stu-id="57a78-123">If you want to compile an application in .NET Framework 4 or later versions and maintain handling of corrupted state exceptions, you can apply the <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> attribute to the method that handles the corrupted state exception.</span></span>

## <a name="configure-code-to-analyze"></a><span data-ttu-id="57a78-124">Configurar o código para analisar</span><span class="sxs-lookup"><span data-stu-id="57a78-124">Configure code to analyze</span></span>

<span data-ttu-id="57a78-125">Use a opção a seguir para configurar em quais partes de sua base de código executar essa regra.</span><span class="sxs-lookup"><span data-stu-id="57a78-125">Use the following option to configure which parts of your codebase to run this rule on.</span></span>

- [<span data-ttu-id="57a78-126">Nomes de tipo de exceção não permitido</span><span class="sxs-lookup"><span data-stu-id="57a78-126">Disallowed exception type names</span></span>](#disallowed-exception-type-names)

<span data-ttu-id="57a78-127">Você pode configurar essa opção apenas para essa regra, para todas as regras ou para todas as regras nesta categoria (Design).</span><span class="sxs-lookup"><span data-stu-id="57a78-127">You can configure this option for just this rule, for all rules, or for all rules in this category (Design).</span></span> <span data-ttu-id="57a78-128">Para obter mais informações, consulte [Opções de configuração de regra de qualidade de código](../code-quality-rule-options.md).</span><span class="sxs-lookup"><span data-stu-id="57a78-128">For more information, see [Code quality rule configuration options](../code-quality-rule-options.md).</span></span>

### <a name="disallowed-exception-type-names"></a><span data-ttu-id="57a78-129">Nomes de tipo de exceção não permitido</span><span class="sxs-lookup"><span data-stu-id="57a78-129">Disallowed exception type names</span></span>

<span data-ttu-id="57a78-130">Você pode configurar quais tipos de exceção são despermitidos de serem capturados.</span><span class="sxs-lookup"><span data-stu-id="57a78-130">You can configure which exception types are disallowed from being caught.</span></span> <span data-ttu-id="57a78-131">Por exemplo, para especificar que a regra deve sinalizar `catch` manipuladores com `NullReferenceException` , adicione o seguinte par chave-valor a um arquivo *. editorconfig* em seu projeto:</span><span class="sxs-lookup"><span data-stu-id="57a78-131">For example, to specify that the rule should flag `catch` handlers with `NullReferenceException`, add the following key-value pair to an *.editorconfig* file in your project:</span></span>

```ini
dotnet_code_quality.CA1031.disallowed_symbol_names = NullReferenceException
```

<span data-ttu-id="57a78-132">Formatos de nome de tipo permitidos no valor de opção (separados por `|` ):</span><span class="sxs-lookup"><span data-stu-id="57a78-132">Allowed type name formats in the option value (separated by `|`):</span></span>

- <span data-ttu-id="57a78-133">Somente nome de tipo (inclui todos os símbolos com o nome, independentemente do tipo ou namespace que a contém)</span><span class="sxs-lookup"><span data-stu-id="57a78-133">Type name only (includes all symbols with the name, regardless of the containing type or namespace)</span></span>
- <span data-ttu-id="57a78-134">Nomes totalmente qualificados no [formato de ID de documentação](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings) do símbolo com um `T:` prefixo.</span><span class="sxs-lookup"><span data-stu-id="57a78-134">Fully qualified names in the symbol's [documentation ID format](../../../csharp/programming-guide/xmldoc/processing-the-xml-file.md#id-strings) with a `T:` prefix.</span></span>

<span data-ttu-id="57a78-135">Exemplos:</span><span class="sxs-lookup"><span data-stu-id="57a78-135">Examples:</span></span>

| <span data-ttu-id="57a78-136">Valor de Opção</span><span class="sxs-lookup"><span data-stu-id="57a78-136">Option Value</span></span> | <span data-ttu-id="57a78-137">Resumo</span><span class="sxs-lookup"><span data-stu-id="57a78-137">Summary</span></span> |
| --- | --- |
|`dotnet_code_quality.CA1031.disallowed_symbol_names = ExceptionType` | <span data-ttu-id="57a78-138">Corresponde a todos os símbolos nomeados ' ExceptionType ' na compilação</span><span class="sxs-lookup"><span data-stu-id="57a78-138">Matches all symbols named 'ExceptionType' in the compilation</span></span>
|`dotnet_code_quality.CA1031.disallowed_symbol_names = ExceptionType1|ExceptionType2` | <span data-ttu-id="57a78-139">Corresponde a todos os símbolos denominados ' ExceptionType1 ' ou ' ExceptionType2 ' na compilação</span><span class="sxs-lookup"><span data-stu-id="57a78-139">Matches all symbols named either 'ExceptionType1' or 'ExceptionType2' in the compilation</span></span>
|`dotnet_code_quality.CA1031.disallowed_symbol_names = T:NS.ExceptionType` | <span data-ttu-id="57a78-140">Corresponde a tipos específicos chamados ' ExceptionType ' com o nome totalmente qualificado fornecido.</span><span class="sxs-lookup"><span data-stu-id="57a78-140">Matches specific types named 'ExceptionType' with given fully qualified name.</span></span>
|`dotnet_code_quality.CA1031.disallowed_symbol_names = T:NS1.ExceptionType1|T:NS1.ExceptionType2` | <span data-ttu-id="57a78-141">Corresponde aos tipos nomeados ' ExceptionType1 ' e ' ExceptionType2 ' com os respectivos nomes totalmente qualificados</span><span class="sxs-lookup"><span data-stu-id="57a78-141">Matches types named 'ExceptionType1' and 'ExceptionType2' with respective fully qualified names</span></span>

<span data-ttu-id="57a78-142">Você pode configurar essas opções apenas para essa regra, para todas as regras ou para todas as regras nesta categoria (Design).</span><span class="sxs-lookup"><span data-stu-id="57a78-142">You can configure these options for just this rule, for all rules, or for all rules in this category (Design).</span></span> <span data-ttu-id="57a78-143">Para obter mais informações, consulte [Opções de configuração de regra de qualidade de código](../code-quality-rule-options.md).</span><span class="sxs-lookup"><span data-stu-id="57a78-143">For more information, see [Code quality rule configuration options](../code-quality-rule-options.md).</span></span>

## <a name="example"></a><span data-ttu-id="57a78-144">Exemplo</span><span class="sxs-lookup"><span data-stu-id="57a78-144">Example</span></span>

<span data-ttu-id="57a78-145">O exemplo a seguir mostra um tipo que viola essa regra e um tipo que implementa corretamente o `catch` bloco.</span><span class="sxs-lookup"><span data-stu-id="57a78-145">The following example shows a type that violates this rule and a type that correctly implements the `catch` block.</span></span>

:::code language="vb" source="snippets/vb/all-rules/ca1031-do-not-catch-general-exception-types_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca1031.cs" id="snippet1":::

## <a name="related-rules"></a><span data-ttu-id="57a78-146">Regras relacionadas</span><span class="sxs-lookup"><span data-stu-id="57a78-146">Related rules</span></span>

[<span data-ttu-id="57a78-147">CA2200: Relançar para preservar detalhes da pilha</span><span class="sxs-lookup"><span data-stu-id="57a78-147">CA2200: Rethrow to preserve stack details</span></span>](ca2200.md)
