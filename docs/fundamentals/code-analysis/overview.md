---
title: Análise de código no .NET
titleSuffix: ''
description: Saiba mais sobre a análise de código-fonte no SDK do .NET.
ms.date: 08/22/2020
ms.topic: overview
ms.custom: updateeachrelease
helpviewer_keywords:
- code analysis
- code analyzers
ms.openlocfilehash: ca3a9cb914befbc8e0982070b818b27ee3143793
ms.sourcegitcommit: b1442669f1982d3a1cb18ea35b5acfb0fc7d93e4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/30/2020
ms.locfileid: "96585543"
---
# <a name="overview-of-net-source-code-analysis"></a><span data-ttu-id="0a64c-103">Visão geral da análise de código-fonte do .NET</span><span class="sxs-lookup"><span data-stu-id="0a64c-103">Overview of .NET source code analysis</span></span>

<span data-ttu-id="0a64c-104">Os analisadores do .NET Compiler Platform (Roslyn) inspecionam código em C# ou no Visual Basic em busca de problemas de estilo e de qualidade.</span><span class="sxs-lookup"><span data-stu-id="0a64c-104">.NET compiler platform (Roslyn) analyzers inspect your C# or Visual Basic code for code quality and code style issues.</span></span> <span data-ttu-id="0a64c-105">Do .NET 5.0 em diante, esses analisadores estão incluídos no SDK do .NET.</span><span class="sxs-lookup"><span data-stu-id="0a64c-105">Starting in .NET 5.0, these analyzers are included with the .NET SDK.</span></span> <span data-ttu-id="0a64c-106">(Anteriormente, você instalou analisadores de qualidade de código como um [pacote NuGet](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers)e analisadores de estilo de código foram instalados com o Visual Studio.)</span><span class="sxs-lookup"><span data-stu-id="0a64c-106">(Previously, you installed code quality analyzers as a [NuGet package](https://www.nuget.org/packages/Microsoft.CodeAnalysis.FxCopAnalyzers), and code style analyzers were installed with Visual Studio.)</span></span>

- [<span data-ttu-id="0a64c-107">Análise de qualidade de código (regras "CAxxxx")</span><span class="sxs-lookup"><span data-stu-id="0a64c-107">Code quality analysis ("CAxxxx" rules)</span></span>](#code-quality-analysis)
- [<span data-ttu-id="0a64c-108">Análise de estilo de código (regras "IDExxxx")</span><span class="sxs-lookup"><span data-stu-id="0a64c-108">Code style analysis ("IDExxxx" rules)</span></span>](#code-style-analysis)

<span data-ttu-id="0a64c-109">Se violações de regra forem encontradas por um analisador, elas serão relatadas como uma sugestão, aviso ou erro, dependendo de como cada regra é [configurada](configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="0a64c-109">If rule violations are found by an analyzer, they're reported as a suggestion, warning, or error, depending on how each rule is [configured](configuration-options.md).</span></span> <span data-ttu-id="0a64c-110">Violações de análise de código aparecem com o prefixo "CA" ou "IDE" para diferenciá-las dos erros do compilador.</span><span class="sxs-lookup"><span data-stu-id="0a64c-110">Code analysis violations appear with the prefix "CA" or "IDE" to differentiate them from compiler errors.</span></span>

> [!TIP]
>
> - <span data-ttu-id="0a64c-111">Você também pode instalar analisadores de terceiros, como [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [analisadores de xUnit](https://www.nuget.org/packages/xunit.analyzers/)e o [analisador de sonar](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span><span class="sxs-lookup"><span data-stu-id="0a64c-111">You can also install third party analyzers, such as [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [XUnit Analyzers](https://www.nuget.org/packages/xunit.analyzers/), and [Sonar Analyzer](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span></span>
> - <span data-ttu-id="0a64c-112">Se você estiver usando o Visual Studio, muitas regras do analisador têm *correções de código* associadas que você pode aplicar para corrigir o problema.</span><span class="sxs-lookup"><span data-stu-id="0a64c-112">If you're using Visual Studio, many analyzer rules have associated *code fixes* that you can apply to correct the problem.</span></span> <span data-ttu-id="0a64c-113">As correções de código são mostradas no menu de ícones de lâmpada.</span><span class="sxs-lookup"><span data-stu-id="0a64c-113">Code fixes are shown in the light bulb icon menu.</span></span>

## <a name="code-quality-analysis"></a><span data-ttu-id="0a64c-114">Análise de qualidade de código</span><span class="sxs-lookup"><span data-stu-id="0a64c-114">Code quality analysis</span></span>

<span data-ttu-id="0a64c-115">_As regras de análise de qualidade de código ("AC")_ inspecionam seu código em C# ou Visual Basic para fins de segurança, desempenho, design e outros problemas.</span><span class="sxs-lookup"><span data-stu-id="0a64c-115">_Code quality analysis ("CA") rules_ inspect your C# or Visual Basic code for security, performance, design and other issues.</span></span> <span data-ttu-id="0a64c-116">A análise é habilitada, por padrão, para projetos direcionados ao .NET 5,0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="0a64c-116">Analysis is enabled, by default, for projects that target .NET 5.0 or later.</span></span> <span data-ttu-id="0a64c-117">Você pode habilitar a análise de código em projetos direcionados a versões anteriores do .NET definindo a propriedade [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) como `true` .</span><span class="sxs-lookup"><span data-stu-id="0a64c-117">You can enable code analysis on projects that target earlier .NET versions by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span> <span data-ttu-id="0a64c-118">Você também pode desabilitar a análise de código para seu projeto definindo `EnableNETAnalyzers` como `false` .</span><span class="sxs-lookup"><span data-stu-id="0a64c-118">You can also disable code analysis for your project by setting `EnableNETAnalyzers` to `false`.</span></span>

> [!TIP]
> <span data-ttu-id="0a64c-119">No Visual Studio, você pode habilitar ou desabilitar a análise de código usando o projeto janela Propriedades.</span><span class="sxs-lookup"><span data-stu-id="0a64c-119">In Visual Studio, you can enable or disable code analysis using the Project Properties window.</span></span> <span data-ttu-id="0a64c-120">Para acessar o projeto janela Propriedades, clique com o botão direito do mouse em um projeto dentro de Gerenciador de Soluções e selecione **Propriedades**.</span><span class="sxs-lookup"><span data-stu-id="0a64c-120">To access the Project Properties window, right-click on a project within Solution Explorer and select **Properties**.</span></span> <span data-ttu-id="0a64c-121">Em seguida, selecione a guia **análise de código** e marque ou desmarque a caixa de seleção para **habilitar os analisadores .net**.</span><span class="sxs-lookup"><span data-stu-id="0a64c-121">Next, select the **Code Analysis** tab, and then either select or clear the checkbox to **Enable .NET analyzers**.</span></span>

### <a name="enabled-rules"></a><span data-ttu-id="0a64c-122">Regras habilitadas</span><span class="sxs-lookup"><span data-stu-id="0a64c-122">Enabled rules</span></span>

<span data-ttu-id="0a64c-123">As regras a seguir estão habilitadas, por padrão, no .NET 5,0 Preview 8.</span><span class="sxs-lookup"><span data-stu-id="0a64c-123">The following rules are enabled, by default, in .NET 5.0 Preview 8.</span></span>

| <span data-ttu-id="0a64c-124">ID do diagnóstico</span><span class="sxs-lookup"><span data-stu-id="0a64c-124">Diagnostic ID</span></span> | <span data-ttu-id="0a64c-125">Categoria</span><span class="sxs-lookup"><span data-stu-id="0a64c-125">Category</span></span> | <span data-ttu-id="0a64c-126">Severidade</span><span class="sxs-lookup"><span data-stu-id="0a64c-126">Severity</span></span> | <span data-ttu-id="0a64c-127">Descrição</span><span class="sxs-lookup"><span data-stu-id="0a64c-127">Description</span></span> |
| - | - | - | - |
| [<span data-ttu-id="0a64c-128">CA1416</span><span class="sxs-lookup"><span data-stu-id="0a64c-128">CA1416</span></span>](/visualstudio/code-quality/ca1416) | <span data-ttu-id="0a64c-129">Interoperabilidade</span><span class="sxs-lookup"><span data-stu-id="0a64c-129">Interoperability</span></span> | <span data-ttu-id="0a64c-130">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-130">Warning</span></span> | <span data-ttu-id="0a64c-131">Analisador de compatibilidade de plataforma</span><span class="sxs-lookup"><span data-stu-id="0a64c-131">Platform compatibility analyzer</span></span> |
| [<span data-ttu-id="0a64c-132">CA1417</span><span class="sxs-lookup"><span data-stu-id="0a64c-132">CA1417</span></span>](/visualstudio/code-quality/ca1417) | <span data-ttu-id="0a64c-133">Interoperabilidade</span><span class="sxs-lookup"><span data-stu-id="0a64c-133">Interoperability</span></span> | <span data-ttu-id="0a64c-134">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-134">Warning</span></span> | <span data-ttu-id="0a64c-135">Não usar `OutAttribute` em parâmetros de cadeia de caracteres para P/Invokes</span><span class="sxs-lookup"><span data-stu-id="0a64c-135">Do not use `OutAttribute` on string parameters for P/Invokes</span></span> |
| [<span data-ttu-id="0a64c-136">CA1831</span><span class="sxs-lookup"><span data-stu-id="0a64c-136">CA1831</span></span>](/visualstudio/code-quality/ca1831) | <span data-ttu-id="0a64c-137">Desempenho</span><span class="sxs-lookup"><span data-stu-id="0a64c-137">Performance</span></span> | <span data-ttu-id="0a64c-138">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-138">Warning</span></span> | <span data-ttu-id="0a64c-139">Use `AsSpan` em vez de indexadores baseados em intervalo para cadeia de caracteres quando apropriado</span><span class="sxs-lookup"><span data-stu-id="0a64c-139">Use `AsSpan` instead of range-based indexers for string when appropriate</span></span> |
| [<span data-ttu-id="0a64c-140">CA2013</span><span class="sxs-lookup"><span data-stu-id="0a64c-140">CA2013</span></span>](/visualstudio/code-quality/ca2013) | <span data-ttu-id="0a64c-141">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="0a64c-141">Reliability</span></span> | <span data-ttu-id="0a64c-142">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-142">Warning</span></span> | <span data-ttu-id="0a64c-143">Não usar `ReferenceEquals` com tipos de valor</span><span class="sxs-lookup"><span data-stu-id="0a64c-143">Do not use `ReferenceEquals` with value types</span></span> |
| [<span data-ttu-id="0a64c-144">CA2014</span><span class="sxs-lookup"><span data-stu-id="0a64c-144">CA2014</span></span>](/visualstudio/code-quality/ca2014) | <span data-ttu-id="0a64c-145">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="0a64c-145">Reliability</span></span> | <span data-ttu-id="0a64c-146">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-146">Warning</span></span> | <span data-ttu-id="0a64c-147">Não usar `stackalloc` em loops</span><span class="sxs-lookup"><span data-stu-id="0a64c-147">Do not use `stackalloc` in loops</span></span> |
| [<span data-ttu-id="0a64c-148">CA2015</span><span class="sxs-lookup"><span data-stu-id="0a64c-148">CA2015</span></span>](/visualstudio/code-quality/ca2015) | <span data-ttu-id="0a64c-149">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="0a64c-149">Reliability</span></span> | <span data-ttu-id="0a64c-150">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-150">Warning</span></span> | <span data-ttu-id="0a64c-151">Não defina finalizadores para tipos derivados de <xref:System.Buffers.MemoryManager%601></span><span class="sxs-lookup"><span data-stu-id="0a64c-151">Do not define finalizers for types derived from <xref:System.Buffers.MemoryManager%601></span></span> |
| [<span data-ttu-id="0a64c-152">CA2200</span><span class="sxs-lookup"><span data-stu-id="0a64c-152">CA2200</span></span>](/visualstudio/code-quality/ca2200) | <span data-ttu-id="0a64c-153">Uso</span><span class="sxs-lookup"><span data-stu-id="0a64c-153">Usage</span></span> | <span data-ttu-id="0a64c-154">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-154">Warning</span></span> | <span data-ttu-id="0a64c-155">Relançar para preservar detalhes da pilha</span><span class="sxs-lookup"><span data-stu-id="0a64c-155">Rethrow to preserve stack details</span></span>
| [<span data-ttu-id="0a64c-156">CA2247</span><span class="sxs-lookup"><span data-stu-id="0a64c-156">CA2247</span></span>](/visualstudio/code-quality/ca2247) | <span data-ttu-id="0a64c-157">Uso</span><span class="sxs-lookup"><span data-stu-id="0a64c-157">Usage</span></span> | <span data-ttu-id="0a64c-158">Aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-158">Warning</span></span> | <span data-ttu-id="0a64c-159">O argumento passado para o Construtor TaskCompletionSource deve ser <xref:System.Threading.Tasks.TaskCreationOptions> enum em vez de <xref:System.Threading.Tasks.TaskContinuationOptions></span><span class="sxs-lookup"><span data-stu-id="0a64c-159">Argument passed to TaskCompletionSource constructor should be <xref:System.Threading.Tasks.TaskCreationOptions> enum instead of <xref:System.Threading.Tasks.TaskContinuationOptions></span></span> |

<span data-ttu-id="0a64c-160">Você pode alterar a severidade dessas regras para desabilitá-las ou promovê-las para erros.</span><span class="sxs-lookup"><span data-stu-id="0a64c-160">You can change the severity of these rules to disable them or elevate them to errors.</span></span>

<span data-ttu-id="0a64c-161">Para obter uma lista completa das regras de qualidade de código disponíveis, consulte [regras de qualidade de código](quality-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="0a64c-161">For a full list of available code quality rules, see [Code quality rules](quality-rules/index.md).</span></span>

### <a name="enable-additional-rules"></a><span data-ttu-id="0a64c-162">Habilitar regras adicionais</span><span class="sxs-lookup"><span data-stu-id="0a64c-162">Enable additional rules</span></span>

<span data-ttu-id="0a64c-163">A partir do .NET 5,0 RC2, o SDK do .NET é fornecido com todas as [regras de qualidade de código "CA"](/visualstudio/code-quality/code-analysis-for-managed-code-warnings).</span><span class="sxs-lookup"><span data-stu-id="0a64c-163">Starting with .NET 5.0 RC2, the .NET SDK ships with all of the ["CA" code quality rules](/visualstudio/code-quality/code-analysis-for-managed-code-warnings).</span></span> <span data-ttu-id="0a64c-164">Para obter uma lista completa das regras incluídas em cada versão do SDK do .NET, consulte [versões do analisador](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="0a64c-164">For a full list of rules that are included with each .NET SDK version, see [analyzer releases](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>

#### <a name="default-analysis-mode"></a><span data-ttu-id="0a64c-165">Modo de análise padrão</span><span class="sxs-lookup"><span data-stu-id="0a64c-165">Default analysis mode</span></span>

<span data-ttu-id="0a64c-166">No modo de análise padrão, algumas regras são [habilitadas por padrão](#enabled-rules) como avisos de compilação.</span><span class="sxs-lookup"><span data-stu-id="0a64c-166">In the default analysis mode, some rules are [enabled by default](#enabled-rules) as build warnings.</span></span> <span data-ttu-id="0a64c-167">Algumas outras regras são habilitadas por padrão apenas como sugestões de IDE do Visual Studio com correções de código correspondentes.</span><span class="sxs-lookup"><span data-stu-id="0a64c-167">Some other rules are enabled by default only as Visual Studio IDE suggestions with corresponding code fixes.</span></span> <span data-ttu-id="0a64c-168">As regras restantes são desabilitadas por padrão.</span><span class="sxs-lookup"><span data-stu-id="0a64c-168">The remaining rules are disabled by default.</span></span> <span data-ttu-id="0a64c-169">A [lista completa de regras](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md) inclui a severidade padrão de cada regra e se a regra está ou não habilitada por padrão no modo de análise padrão.</span><span class="sxs-lookup"><span data-stu-id="0a64c-169">The [full list of rules](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md) includes each rule's default severity and whether or not the rule is enabled by default in the default analysis mode.</span></span>

#### <a name="custom-analysis-mode"></a><span data-ttu-id="0a64c-170">Modo de análise personalizada</span><span class="sxs-lookup"><span data-stu-id="0a64c-170">Custom analysis mode</span></span>

<span data-ttu-id="0a64c-171">Você pode [configurar regras de análise de código](configuration-options.md) para habilitar ou desabilitar uma regra individual ou uma categoria de regras.</span><span class="sxs-lookup"><span data-stu-id="0a64c-171">You can [configure code analysis rules](configuration-options.md) to enable or disable an individual rule or a category of rules.</span></span> <span data-ttu-id="0a64c-172">Além disso, você pode usar a propriedade [analysismode](../../core/project-sdk/msbuild-props.md#analysismode) para alternar para um dos seguintes modos de análise personalizados:</span><span class="sxs-lookup"><span data-stu-id="0a64c-172">Additionally, you can use the [AnalysisMode](../../core/project-sdk/msbuild-props.md#analysismode) property to switch to one of the following custom analysis modes:</span></span>

- <span data-ttu-id="0a64c-173">Modo _agressivo_ ou _de recusa_ : todas as regras são habilitadas por padrão como avisos de compilação.</span><span class="sxs-lookup"><span data-stu-id="0a64c-173">_Aggressive_ or _Opt-out_ mode: All rules are enabled by default as build warnings.</span></span> <span data-ttu-id="0a64c-174">Você pode [recusar](configuration-options.md) seletivamente as regras individuais para desabilitá-las.</span><span class="sxs-lookup"><span data-stu-id="0a64c-174">You can selectively [opt out](configuration-options.md) of individual rules to disable them.</span></span>
- <span data-ttu-id="0a64c-175">Modo _conservador_ ou _opt-in_ : todas as regras são desabilitadas por padrão.</span><span class="sxs-lookup"><span data-stu-id="0a64c-175">_Conservative_ or _Opt-in_ mode: All rules are disabled by default.</span></span> <span data-ttu-id="0a64c-176">Você pode [optar](configuration-options.md) seletivamente por regras individuais para habilitá-las.</span><span class="sxs-lookup"><span data-stu-id="0a64c-176">You can selectively [opt into](configuration-options.md) individual rules to enable them.</span></span>

### <a name="treat-warnings-as-errors"></a><span data-ttu-id="0a64c-177">Tratar avisos como erros</span><span class="sxs-lookup"><span data-stu-id="0a64c-177">Treat warnings as errors</span></span>

<span data-ttu-id="0a64c-178">Se você usar o `-warnaserror` sinalizador ao compilar seus projetos, todos os avisos de análise de código também serão tratados como erros.</span><span class="sxs-lookup"><span data-stu-id="0a64c-178">If you use the `-warnaserror` flag when you build your projects, all code analysis warnings are also treated as errors.</span></span> <span data-ttu-id="0a64c-179">Se você não quiser que os avisos de qualidade de código (CAxxxx) sejam tratados como erros em presença de `-warnaserror` , você poderá definir a `CodeAnalysisTreatWarningsAsErrors` Propriedade do MSBuild como `false` no arquivo do projeto.</span><span class="sxs-lookup"><span data-stu-id="0a64c-179">If you do not want code quality warnings (CAxxxx) to be treated as errors in presence of `-warnaserror`, you can set the `CodeAnalysisTreatWarningsAsErrors` MSBuild property to `false` in your project file.</span></span>

```xml
<PropertyGroup>
  <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
</PropertyGroup>
```

<span data-ttu-id="0a64c-180">Você ainda verá quaisquer avisos de análise de código, mas eles não interromperão sua compilação.</span><span class="sxs-lookup"><span data-stu-id="0a64c-180">You'll still see any code analysis warnings, but they won't break your build.</span></span>

### <a name="latest-updates"></a><span data-ttu-id="0a64c-181">Atualizações mais recentes</span><span class="sxs-lookup"><span data-stu-id="0a64c-181">Latest updates</span></span>

<span data-ttu-id="0a64c-182">Por padrão, você obterá as regras de análise de código mais recentes e as severidades de regra padrão ao atualizar para versões mais recentes do SDK do .NET.</span><span class="sxs-lookup"><span data-stu-id="0a64c-182">By default, you'll get the latest code analysis rules and default rule severities as you upgrade to newer versions of the .NET SDK.</span></span> <span data-ttu-id="0a64c-183">Se você não quiser esse comportamento, por exemplo, se quiser garantir que nenhuma regra nova seja habilitada ou desabilitada, você poderá substituí-la de uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="0a64c-183">If you don't want this behavior, for example, if you want to ensure that no new rules are enabled or disabled, you can override it in one of the following ways:</span></span>

- <span data-ttu-id="0a64c-184">Defina a `AnalysisLevel` Propriedade MSBuild com um valor específico para bloquear os avisos para esse conjunto.</span><span class="sxs-lookup"><span data-stu-id="0a64c-184">Set the `AnalysisLevel` MSBuild property to a specific value to lock the warnings to that set.</span></span> <span data-ttu-id="0a64c-185">Ao atualizar para um SDK mais recente, você ainda obterá correções de bug para esses avisos, mas nenhum aviso novo será habilitado e nenhum aviso existente será desabilitado.</span><span class="sxs-lookup"><span data-stu-id="0a64c-185">When you upgrade to a newer SDK, you'll still get bug fixes for those warnings, but no new warnings will be enabled and no existing warnings will be disabled.</span></span> <span data-ttu-id="0a64c-186">Por exemplo, para bloquear o conjunto de regras para as que acompanham a versão 5,0 do SDK do .NET, adicione a seguinte entrada ao arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="0a64c-186">For example, to lock the set of rules to those that ship with version 5.0 of the .NET SDK, add the following entry to your project file.</span></span>

  ```xml
  <PropertyGroup>
    <AnalysisLevel>5.0</AnalysisLevel>
  </PropertyGroup>
  ```

  > [!TIP]
  > <span data-ttu-id="0a64c-187">O valor padrão da `AnalysisLevel` propriedade é `latest` , o que significa que você sempre Obtém as últimas regras de análise de código à medida que passa para versões mais recentes do SDK do .net.</span><span class="sxs-lookup"><span data-stu-id="0a64c-187">The default value for the `AnalysisLevel` property is `latest`, which means you always get the latest code analysis rules as you move to newer versions of the .NET SDK.</span></span>

  <span data-ttu-id="0a64c-188">Para obter mais informações e ver uma lista de possíveis valores, consulte [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span><span class="sxs-lookup"><span data-stu-id="0a64c-188">For more information, and to see a list of possible values, see [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span></span>

- <span data-ttu-id="0a64c-189">Instale o [pacote NuGet Microsoft. CodeAnalysis. Netanalyzers](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) para desassociar atualizações de regra das atualizações do SDK do .net.</span><span class="sxs-lookup"><span data-stu-id="0a64c-189">Install the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) to decouple rule updates from .NET SDK updates.</span></span> <span data-ttu-id="0a64c-190">A instalação do pacote desativa os analisadores internos do SDK e gera um aviso de compilação se o SDK contiver uma versão de assembly do analisador mais recente do que a do pacote NuGet.</span><span class="sxs-lookup"><span data-stu-id="0a64c-190">Installing the package turns off the built-in SDK analyzers and generates a build warning if the SDK contains a newer analyzer assembly version than that of the NuGet package.</span></span>

## <a name="code-style-analysis"></a><span data-ttu-id="0a64c-191">Análise de estilo de código</span><span class="sxs-lookup"><span data-stu-id="0a64c-191">Code style analysis</span></span>

<span data-ttu-id="0a64c-192">A [análise do estilo de código](/visualstudio/ide/editorconfig-code-style-settings-reference) (regras "IDExxxx") permite que você defina e mantenha o estilo de código consistente em sua codebase.</span><span class="sxs-lookup"><span data-stu-id="0a64c-192">[Code style analysis](/visualstudio/ide/editorconfig-code-style-settings-reference) ("IDExxxx" rules) enables you to define and maintain consistent code style in your codebase.</span></span> <span data-ttu-id="0a64c-193">A seguir estão as configurações padrão:</span><span class="sxs-lookup"><span data-stu-id="0a64c-193">Following are the default settings:</span></span>

- <span data-ttu-id="0a64c-194">Compilação de linha de comando: a análise de estilo de código está desabilitada, por padrão, para todos os projetos .NET em compilações de linha de comando.</span><span class="sxs-lookup"><span data-stu-id="0a64c-194">Command line build: Code style analysis is disabled, by default, for all .NET projects on command-line builds.</span></span>
- <span data-ttu-id="0a64c-195">Visual Studio: a análise de estilo de código está habilitada, por padrão, para todos os projetos .NET dentro do Visual Studio como [ações rápidas de refatoração de código](/visualstudio/ide/code-generation-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="0a64c-195">Visual Studio: Code style analysis is enabled, by default, for all .NET projects inside Visual Studio as [code refactoring quick actions](/visualstudio/ide/code-generation-in-visual-studio).</span></span>

<span data-ttu-id="0a64c-196">Iniciando o .NET 5,0 RC2, você pode habilitar a análise de estilo de código no Build, tanto na linha de comando quanto dentro do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0a64c-196">Starting .NET 5.0 RC2, you can enable code style analysis on build, both at the command line and inside Visual Studio.</span></span> <span data-ttu-id="0a64c-197">Violações de estilo de código aparecem como avisos ou erros com um prefixo "IDE".</span><span class="sxs-lookup"><span data-stu-id="0a64c-197">Code style violations appear as warnings or errors with an "IDE" prefix.</span></span> <span data-ttu-id="0a64c-198">Isso permite que você imponha estilos de código consistentes no momento da compilação.</span><span class="sxs-lookup"><span data-stu-id="0a64c-198">This enables you to enforce consistent code styles at build time.</span></span>

> [!NOTE]
> <span data-ttu-id="0a64c-199">O recurso de análise de estilo de código é experimental e pode mudar entre as versões do .NET 5 e do .NET 6.</span><span class="sxs-lookup"><span data-stu-id="0a64c-199">The code style analysis feature is experimental and may change between the .NET 5 and .NET 6 releases.</span></span>

<span data-ttu-id="0a64c-200">Etapas para habilitar a análise do estilo de código na compilação:</span><span class="sxs-lookup"><span data-stu-id="0a64c-200">Steps to enable code style analysis on build:</span></span>

1. <span data-ttu-id="0a64c-201">Defina a propriedade [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) do MSBuild como `true` .</span><span class="sxs-lookup"><span data-stu-id="0a64c-201">Set the MSBuild property [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) to `true`.</span></span>

1. <span data-ttu-id="0a64c-202">Em um arquivo *. editorconfig* , [Configure](configuration-options.md) cada regra de estilo de código "IDE" que você deseja executar na compilação como um aviso ou um erro.</span><span class="sxs-lookup"><span data-stu-id="0a64c-202">In an *.editorconfig* file, [configure](configuration-options.md) each "IDE" code style rule that you wish to run on build as a warning or an error.</span></span> <span data-ttu-id="0a64c-203">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="0a64c-203">For example:</span></span>

   ```ini
   [*.{cs,vb}]
   # IDE0040: Accessibility modifiers required (escalated to a build warning)
   dotnet_diagnostic.IDE0040.severity = warning
   ```

   <span data-ttu-id="0a64c-204">Como alternativa, você pode configurar a categoria "estilo" inteira para ser um aviso ou erro, por padrão, e, em seguida, desativar seletivamente as regras que você não deseja executar na compilação.</span><span class="sxs-lookup"><span data-stu-id="0a64c-204">Alternatively, you can configure the entire "Style" category to be a warning or error, by default, and then selectively turn off rules that you don't want to run on build.</span></span> <span data-ttu-id="0a64c-205">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="0a64c-205">For example:</span></span>

   ```ini
   [*.{cs,vb}]

   # Default severity for analyzer diagnostics with category 'Style' (escalated to build warnings)
   dotnet_analyzer_diagnostic.category-Style.severity = warning

   # IDE0040: Accessibility modifiers required (disabled on build)
   dotnet_diagnostic.IDE0040.severity = silent
   ```

## <a name="suppress-a-warning"></a><span data-ttu-id="0a64c-206">Suprimir um aviso</span><span class="sxs-lookup"><span data-stu-id="0a64c-206">Suppress a warning</span></span>

<span data-ttu-id="0a64c-207">Para suprimir uma violação de regra, defina a opção de severidade para essa ID de regra como `none` em um arquivo EditorConfig.</span><span class="sxs-lookup"><span data-stu-id="0a64c-207">To suppress a rule violation, set the severity option for that rule ID to `none` in an EditorConfig file.</span></span> <span data-ttu-id="0a64c-208">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="0a64c-208">For example:</span></span>

```ini
dotnet_diagnostic.CA1822.severity = none
```

<span data-ttu-id="0a64c-209">O Visual Studio fornece maneiras adicionais de suprimir avisos das regras de análise de código.</span><span class="sxs-lookup"><span data-stu-id="0a64c-209">Visual Studio provides additional ways to suppress warnings from code analysis rules.</span></span> <span data-ttu-id="0a64c-210">Para obter mais informações, consulte [suprimir violações](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span><span class="sxs-lookup"><span data-stu-id="0a64c-210">For more information, see [Suppress violations](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span></span>

<span data-ttu-id="0a64c-211">Para obter mais informações sobre severidades de regra, consulte [Configurar a severidade da regra](configuration-options.md#severity-level).</span><span class="sxs-lookup"><span data-stu-id="0a64c-211">For more information about rule severities, see [Configure rule severity](configuration-options.md#severity-level).</span></span>

## <a name="see-also"></a><span data-ttu-id="0a64c-212">Confira também</span><span class="sxs-lookup"><span data-stu-id="0a64c-212">See also</span></span>

- [<span data-ttu-id="0a64c-213">Referência da regra de análise de qualidade de código</span><span class="sxs-lookup"><span data-stu-id="0a64c-213">Code quality analysis rule reference</span></span>](quality-rules/index.md)
- [<span data-ttu-id="0a64c-214">Referência da regra de análise de estilo de código</span><span class="sxs-lookup"><span data-stu-id="0a64c-214">Code style analysis rule reference</span></span>](style-rules/index.md)
- [<span data-ttu-id="0a64c-215">Análise de código no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0a64c-215">Code analysis in Visual Studio</span></span>](/visualstudio/code-quality/roslyn-analyzers-overview)
- [<span data-ttu-id="0a64c-216">SDK da Plataforma do Compilador .NET</span><span class="sxs-lookup"><span data-stu-id="0a64c-216">.NET Compiler Platform SDK</span></span>](../../csharp/roslyn-sdk/index.md)
- [<span data-ttu-id="0a64c-217">Tutorial: escrever seu primeiro analisador e correção de código</span><span class="sxs-lookup"><span data-stu-id="0a64c-217">Tutorial: Write your first analyzer and code fix</span></span>](../../csharp/roslyn-sdk/tutorials/how-to-write-csharp-analyzer-code-fix.md)
