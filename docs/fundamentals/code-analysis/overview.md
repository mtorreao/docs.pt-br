---
title: Análise de código no .NET
titleSuffix: ''
description: Saiba mais sobre a análise de código-fonte no SDK do .NET.
ms.date: 12/04/2020
ms.topic: overview
ms.custom: updateeachrelease
helpviewer_keywords:
- code analysis
- code analyzers
ms.openlocfilehash: 657975742c3efc2985264fe16cb316357b959e73
ms.sourcegitcommit: 45c7148f2483db2501c1aa696ab6ed2ed8cb71b2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/08/2020
ms.locfileid: "96851810"
---
# <a name="overview-of-net-source-code-analysis"></a><span data-ttu-id="f11fb-103">Visão geral da análise de código-fonte do .NET</span><span class="sxs-lookup"><span data-stu-id="f11fb-103">Overview of .NET source code analysis</span></span>

<span data-ttu-id="f11fb-104">Os analisadores do .NET Compiler Platform (Roslyn) inspecionam código em C# ou no Visual Basic em busca de problemas de estilo e de qualidade.</span><span class="sxs-lookup"><span data-stu-id="f11fb-104">.NET compiler platform (Roslyn) analyzers inspect your C# or Visual Basic code for code quality and code style issues.</span></span> <span data-ttu-id="f11fb-105">A partir do .NET 5,0, esses analisadores estão incluídos no SDK do .NET e você não precisa instalá-los separadamente.</span><span class="sxs-lookup"><span data-stu-id="f11fb-105">Starting in .NET 5.0, these analyzers are included with the .NET SDK and you don't need to install them separately.</span></span> <span data-ttu-id="f11fb-106">Se o projeto for destinado ao .NET 5 ou posterior, a análise de código será habilitada por padrão.</span><span class="sxs-lookup"><span data-stu-id="f11fb-106">If your project targets .NET 5 or later, code analysis is enabled by default.</span></span> <span data-ttu-id="f11fb-107">Se o projeto tiver como alvo uma implementação diferente do .NET, por exemplo, .NET Core, .NET Standard ou .NET Framework, você deverá habilitar manualmente a análise de código definindo a propriedade [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) como `true` .</span><span class="sxs-lookup"><span data-stu-id="f11fb-107">If your project target a different .NET implementation, for example, .NET Core, .NET Standard, or .NET Framework, you must manually enable code analysis by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span>

<span data-ttu-id="f11fb-108">Se você não quiser migrar para o SDK do .NET 5 + ou se preferir um modelo baseado em pacote NuGet, os analisadores também estarão disponíveis no [pacote NuGet Microsoft. CodeAnalysis. Netanalyzers](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span><span class="sxs-lookup"><span data-stu-id="f11fb-108">If you don't want to move to the .NET 5+ SDK or if you prefer a NuGet package-based model, the analyzers are also available in the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://www.nuget.org/packages/Microsoft.CodeAnalysis.NetAnalyzers).</span></span> <span data-ttu-id="f11fb-109">Você pode preferir um modelo baseado em pacote para atualizações de versão sob demanda.</span><span class="sxs-lookup"><span data-stu-id="f11fb-109">You might prefer a package-based model for on-demand version updates.</span></span>

> [!NOTE]
> <span data-ttu-id="f11fb-110">Os analisadores .NET são independentes de estrutura de destino.</span><span class="sxs-lookup"><span data-stu-id="f11fb-110">.NET analyzers are target-framework agnostic.</span></span> <span data-ttu-id="f11fb-111">Ou seja, seu projeto não precisa ter como destino uma implementação específica do .NET.</span><span class="sxs-lookup"><span data-stu-id="f11fb-111">That is, your project does not need to target a specific .NET implementation.</span></span> <span data-ttu-id="f11fb-112">Os analisadores funcionam para projetos direcionados `net5.0` , bem como para versões anteriores do .net, como `netcoreapp3.1` e `net472` .</span><span class="sxs-lookup"><span data-stu-id="f11fb-112">The analyzers work for projects that target `net5.0` as well as earlier .NET versions, such as `netcoreapp3.1` and `net472`.</span></span>

<span data-ttu-id="f11fb-113">Se violações de regra forem encontradas por um analisador, elas serão relatadas como uma sugestão, aviso ou erro, dependendo de como cada regra é [configurada](configuration-options.md).</span><span class="sxs-lookup"><span data-stu-id="f11fb-113">If rule violations are found by an analyzer, they're reported as a suggestion, warning, or error, depending on how each rule is [configured](configuration-options.md).</span></span> <span data-ttu-id="f11fb-114">Violações de análise de código aparecem com o prefixo "CA" ou "IDE" para diferenciá-las dos erros do compilador.</span><span class="sxs-lookup"><span data-stu-id="f11fb-114">Code analysis violations appear with the prefix "CA" or "IDE" to differentiate them from compiler errors.</span></span>

## <a name="code-quality-analysis"></a><span data-ttu-id="f11fb-115">Análise de qualidade de código</span><span class="sxs-lookup"><span data-stu-id="f11fb-115">Code quality analysis</span></span>

<span data-ttu-id="f11fb-116">As regras de *análise de qualidade de código* ("CAxxxx") inspecionam seu código em C# ou Visual Basic para fins de segurança, desempenho, design e outros problemas.</span><span class="sxs-lookup"><span data-stu-id="f11fb-116">*Code quality analysis* ("CAxxxx") rules inspect your C# or Visual Basic code for security, performance, design and other issues.</span></span> <span data-ttu-id="f11fb-117">A análise é habilitada, por padrão, para projetos direcionados ao .NET 5,0 ou posterior.</span><span class="sxs-lookup"><span data-stu-id="f11fb-117">Analysis is enabled, by default, for projects that target .NET 5.0 or later.</span></span> <span data-ttu-id="f11fb-118">Você pode habilitar a análise de código em projetos direcionados a versões anteriores do .NET definindo a propriedade [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) como `true` .</span><span class="sxs-lookup"><span data-stu-id="f11fb-118">You can enable code analysis on projects that target earlier .NET versions by setting the [EnableNETAnalyzers](../../core/project-sdk/msbuild-props.md#enablenetanalyzers) property to `true`.</span></span> <span data-ttu-id="f11fb-119">Você também pode desabilitar a análise de código para seu projeto definindo `EnableNETAnalyzers` como `false` .</span><span class="sxs-lookup"><span data-stu-id="f11fb-119">You can also disable code analysis for your project by setting `EnableNETAnalyzers` to `false`.</span></span>

> [!TIP]
> <span data-ttu-id="f11fb-120">Se você estiver usando o Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="f11fb-120">If you're using Visual Studio:</span></span>
>
> - <span data-ttu-id="f11fb-121">Muitas regras do analisador têm *correções de código* associadas que você pode aplicar para corrigir o problema.</span><span class="sxs-lookup"><span data-stu-id="f11fb-121">Many analyzer rules have associated *code fixes* that you can apply to correct the problem.</span></span> <span data-ttu-id="f11fb-122">As correções de código são mostradas no menu de ícones de lâmpada.</span><span class="sxs-lookup"><span data-stu-id="f11fb-122">Code fixes are shown in the light bulb icon menu.</span></span>
> - <span data-ttu-id="f11fb-123">Você pode habilitar ou desabilitar a análise de código clicando com o botão direito do mouse em um projeto no Gerenciador de soluções e selecionando **Propriedades**  >  guia **análise de código** > **habilitar analisadores .net**.</span><span class="sxs-lookup"><span data-stu-id="f11fb-123">You can enable or disable code analysis by right-clicking on a project in Solution Explorer and selecting **Properties** > **Code Analysis** tab > **Enable .NET analyzers**.</span></span>

### <a name="enabled-rules"></a><span data-ttu-id="f11fb-124">Regras habilitadas</span><span class="sxs-lookup"><span data-stu-id="f11fb-124">Enabled rules</span></span>

<span data-ttu-id="f11fb-125">As regras a seguir estão habilitadas, por padrão, no .NET 5,0.</span><span class="sxs-lookup"><span data-stu-id="f11fb-125">The following rules are enabled, by default, in .NET 5.0.</span></span>

| <span data-ttu-id="f11fb-126">ID do diagnóstico</span><span class="sxs-lookup"><span data-stu-id="f11fb-126">Diagnostic ID</span></span> | <span data-ttu-id="f11fb-127">Category</span><span class="sxs-lookup"><span data-stu-id="f11fb-127">Category</span></span> | <span data-ttu-id="f11fb-128">Severidade</span><span class="sxs-lookup"><span data-stu-id="f11fb-128">Severity</span></span> | <span data-ttu-id="f11fb-129">Descrição</span><span class="sxs-lookup"><span data-stu-id="f11fb-129">Description</span></span> |
| - | - | - | - |
| [<span data-ttu-id="f11fb-130">CA1416</span><span class="sxs-lookup"><span data-stu-id="f11fb-130">CA1416</span></span>](/visualstudio/code-quality/ca1416) | <span data-ttu-id="f11fb-131">Interoperabilidade</span><span class="sxs-lookup"><span data-stu-id="f11fb-131">Interoperability</span></span> | <span data-ttu-id="f11fb-132">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-132">Warning</span></span> | <span data-ttu-id="f11fb-133">Analisador de compatibilidade de plataforma</span><span class="sxs-lookup"><span data-stu-id="f11fb-133">Platform compatibility analyzer</span></span> |
| [<span data-ttu-id="f11fb-134">CA1417</span><span class="sxs-lookup"><span data-stu-id="f11fb-134">CA1417</span></span>](/visualstudio/code-quality/ca1417) | <span data-ttu-id="f11fb-135">Interoperabilidade</span><span class="sxs-lookup"><span data-stu-id="f11fb-135">Interoperability</span></span> | <span data-ttu-id="f11fb-136">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-136">Warning</span></span> | <span data-ttu-id="f11fb-137">Não usar `OutAttribute` em parâmetros de cadeia de caracteres para P/Invokes</span><span class="sxs-lookup"><span data-stu-id="f11fb-137">Do not use `OutAttribute` on string parameters for P/Invokes</span></span> |
| [<span data-ttu-id="f11fb-138">CA1831</span><span class="sxs-lookup"><span data-stu-id="f11fb-138">CA1831</span></span>](/visualstudio/code-quality/ca1831) | <span data-ttu-id="f11fb-139">Desempenho</span><span class="sxs-lookup"><span data-stu-id="f11fb-139">Performance</span></span> | <span data-ttu-id="f11fb-140">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-140">Warning</span></span> | <span data-ttu-id="f11fb-141">Use `AsSpan` em vez de indexadores baseados em intervalo para cadeia de caracteres quando apropriado</span><span class="sxs-lookup"><span data-stu-id="f11fb-141">Use `AsSpan` instead of range-based indexers for string when appropriate</span></span> |
| [<span data-ttu-id="f11fb-142">CA2013</span><span class="sxs-lookup"><span data-stu-id="f11fb-142">CA2013</span></span>](/visualstudio/code-quality/ca2013) | <span data-ttu-id="f11fb-143">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="f11fb-143">Reliability</span></span> | <span data-ttu-id="f11fb-144">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-144">Warning</span></span> | <span data-ttu-id="f11fb-145">Não usar `ReferenceEquals` com tipos de valor</span><span class="sxs-lookup"><span data-stu-id="f11fb-145">Do not use `ReferenceEquals` with value types</span></span> |
| [<span data-ttu-id="f11fb-146">CA2014</span><span class="sxs-lookup"><span data-stu-id="f11fb-146">CA2014</span></span>](/visualstudio/code-quality/ca2014) | <span data-ttu-id="f11fb-147">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="f11fb-147">Reliability</span></span> | <span data-ttu-id="f11fb-148">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-148">Warning</span></span> | <span data-ttu-id="f11fb-149">Não usar `stackalloc` em loops</span><span class="sxs-lookup"><span data-stu-id="f11fb-149">Do not use `stackalloc` in loops</span></span> |
| [<span data-ttu-id="f11fb-150">CA2015</span><span class="sxs-lookup"><span data-stu-id="f11fb-150">CA2015</span></span>](/visualstudio/code-quality/ca2015) | <span data-ttu-id="f11fb-151">Confiabilidade</span><span class="sxs-lookup"><span data-stu-id="f11fb-151">Reliability</span></span> | <span data-ttu-id="f11fb-152">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-152">Warning</span></span> | <span data-ttu-id="f11fb-153">Não defina finalizadores para tipos derivados de <xref:System.Buffers.MemoryManager%601></span><span class="sxs-lookup"><span data-stu-id="f11fb-153">Do not define finalizers for types derived from <xref:System.Buffers.MemoryManager%601></span></span> |
| [<span data-ttu-id="f11fb-154">CA2200</span><span class="sxs-lookup"><span data-stu-id="f11fb-154">CA2200</span></span>](/visualstudio/code-quality/ca2200) | <span data-ttu-id="f11fb-155">Uso</span><span class="sxs-lookup"><span data-stu-id="f11fb-155">Usage</span></span> | <span data-ttu-id="f11fb-156">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-156">Warning</span></span> | <span data-ttu-id="f11fb-157">Relançar para preservar detalhes da pilha</span><span class="sxs-lookup"><span data-stu-id="f11fb-157">Rethrow to preserve stack details</span></span>
| [<span data-ttu-id="f11fb-158">CA2247</span><span class="sxs-lookup"><span data-stu-id="f11fb-158">CA2247</span></span>](/visualstudio/code-quality/ca2247) | <span data-ttu-id="f11fb-159">Uso</span><span class="sxs-lookup"><span data-stu-id="f11fb-159">Usage</span></span> | <span data-ttu-id="f11fb-160">Aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-160">Warning</span></span> | <span data-ttu-id="f11fb-161">O argumento passado para o Construtor TaskCompletionSource deve ser <xref:System.Threading.Tasks.TaskCreationOptions> enum em vez de <xref:System.Threading.Tasks.TaskContinuationOptions></span><span class="sxs-lookup"><span data-stu-id="f11fb-161">Argument passed to TaskCompletionSource constructor should be <xref:System.Threading.Tasks.TaskCreationOptions> enum instead of <xref:System.Threading.Tasks.TaskContinuationOptions></span></span> |

<span data-ttu-id="f11fb-162">Você pode alterar a severidade dessas regras para desabilitá-las ou promovê-las para erros.</span><span class="sxs-lookup"><span data-stu-id="f11fb-162">You can change the severity of these rules to disable them or elevate them to errors.</span></span> <span data-ttu-id="f11fb-163">Você também pode [habilitar mais regras](#enable-additional-rules).</span><span class="sxs-lookup"><span data-stu-id="f11fb-163">You can also [enable more rules](#enable-additional-rules).</span></span>

- <span data-ttu-id="f11fb-164">Para obter uma lista de regras incluídas em cada versão do SDK do .NET, consulte [versões do analisador](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="f11fb-164">For a list of rules that are included with each .NET SDK version, see [Analyzer releases](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>
- <span data-ttu-id="f11fb-165">Para obter uma lista de todas as regras de qualidade de código, consulte [regras de qualidade de código](quality-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="f11fb-165">For a list of all the code quality rules, see [Code quality rules](quality-rules/index.md).</span></span>

### <a name="enable-additional-rules"></a><span data-ttu-id="f11fb-166">Habilitar regras adicionais</span><span class="sxs-lookup"><span data-stu-id="f11fb-166">Enable additional rules</span></span>

<span data-ttu-id="f11fb-167">O *modo de análise* refere-se a uma configuração de análise de código predefinida, em que nenhuma, algumas ou todas as regras estão habilitadas.</span><span class="sxs-lookup"><span data-stu-id="f11fb-167">*Analysis mode* refers to a predefined code analysis configuration where none, some, or all rules are enabled.</span></span> <span data-ttu-id="f11fb-168">No modo de análise padrão, apenas um pequeno número de regras é [habilitado como avisos de compilação](#enabled-rules).</span><span class="sxs-lookup"><span data-stu-id="f11fb-168">In the default analysis mode, only a small number of rules are [enabled as build warnings](#enabled-rules).</span></span> <span data-ttu-id="f11fb-169">Você pode alterar o modo de análise para seu projeto definindo a propriedade [analysismode](../../core/project-sdk/msbuild-props.md#analysismode) no arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="f11fb-169">You can change the analysis mode for your project by setting the [AnalysisMode](../../core/project-sdk/msbuild-props.md#analysismode) property in the project file.</span></span> <span data-ttu-id="f11fb-170">Os valores permitidos são:</span><span class="sxs-lookup"><span data-stu-id="f11fb-170">The allowable values are:</span></span>

| <span data-ttu-id="f11fb-171">Valor</span><span class="sxs-lookup"><span data-stu-id="f11fb-171">Value</span></span> | <span data-ttu-id="f11fb-172">Descrição</span><span class="sxs-lookup"><span data-stu-id="f11fb-172">Description</span></span> |
| - | - |
| `AllDisabledByDefault` | <span data-ttu-id="f11fb-173">Esse é o modo mais conservador.</span><span class="sxs-lookup"><span data-stu-id="f11fb-173">This is the most conservative mode.</span></span> <span data-ttu-id="f11fb-174">Todas as regras são desabilitadas por padrão.</span><span class="sxs-lookup"><span data-stu-id="f11fb-174">All rules are disabled by default.</span></span> <span data-ttu-id="f11fb-175">Você pode [optar](configuration-options.md) seletivamente por regras individuais para habilitá-las.</span><span class="sxs-lookup"><span data-stu-id="f11fb-175">You can selectively [opt into](configuration-options.md) individual rules to enable them.</span></span><br /><br />`<AnalysisMode>AllDisabledByDefault</AnalysisMode>` |
| `AllEnabledByDefault` | <span data-ttu-id="f11fb-176">Esse é o modo mais agressivo.</span><span class="sxs-lookup"><span data-stu-id="f11fb-176">This is the most aggressive mode.</span></span> <span data-ttu-id="f11fb-177">Todas as regras são habilitadas como avisos de compilação.</span><span class="sxs-lookup"><span data-stu-id="f11fb-177">All rules are enabled as build warnings.</span></span> <span data-ttu-id="f11fb-178">Você pode [recusar](configuration-options.md) seletivamente as regras individuais para desabilitá-las.</span><span class="sxs-lookup"><span data-stu-id="f11fb-178">You can selectively [opt out of](configuration-options.md) individual rules to disable them.</span></span><br /><br />`<AnalysisMode>AllEnabledByDefault</AnalysisMode>` |
| `Default` | <span data-ttu-id="f11fb-179">O modo padrão, em que algumas regras são habilitadas como avisos, outras são habilitadas apenas como sugestões de IDE do Visual Studio com correções de código correspondentes e o restante é completamente desabilitado.</span><span class="sxs-lookup"><span data-stu-id="f11fb-179">The default mode, where a handful of rules are enabled as warnings, others are enabled only as Visual Studio IDE suggestions with corresponding code fixes, and the rest are disabled completely.</span></span> <span data-ttu-id="f11fb-180">Você pode [aceitar ou recusar](configuration-options.md) seletivamente as regras individuais para desabilitá-las.</span><span class="sxs-lookup"><span data-stu-id="f11fb-180">You can selectively [opt into or out of](configuration-options.md) individual rules to disable them.</span></span><br /><br />`<AnalysisMode>Default</AnalysisMode>` |

<span data-ttu-id="f11fb-181">Para localizar a severidade padrão de cada regra disponível e se a regra está habilitada ou não no modo de análise padrão, consulte a [lista completa de regras](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span><span class="sxs-lookup"><span data-stu-id="f11fb-181">To find the default severity for each available rule and whether or not the rule is enabled in the default analysis mode, see the [full list of rules](https://github.com/dotnet/roslyn-analyzers/blob/master/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md).</span></span>

### <a name="treat-warnings-as-errors"></a><span data-ttu-id="f11fb-182">Tratar avisos como erros</span><span class="sxs-lookup"><span data-stu-id="f11fb-182">Treat warnings as errors</span></span>

<span data-ttu-id="f11fb-183">Se você usar o `-warnaserror` sinalizador ao compilar seus projetos, todos os avisos de análise de código também serão tratados como erros.</span><span class="sxs-lookup"><span data-stu-id="f11fb-183">If you use the `-warnaserror` flag when you build your projects, all code analysis warnings are also treated as errors.</span></span> <span data-ttu-id="f11fb-184">Se você não quiser que os avisos de qualidade de código (CAxxxx) sejam tratados como erros em presença de `-warnaserror` , você poderá definir a `CodeAnalysisTreatWarningsAsErrors` Propriedade do MSBuild como `false` no arquivo do projeto.</span><span class="sxs-lookup"><span data-stu-id="f11fb-184">If you do not want code quality warnings (CAxxxx) to be treated as errors in presence of `-warnaserror`, you can set the `CodeAnalysisTreatWarningsAsErrors` MSBuild property to `false` in your project file.</span></span>

```xml
<PropertyGroup>
  <CodeAnalysisTreatWarningsAsErrors>false</CodeAnalysisTreatWarningsAsErrors>
</PropertyGroup>
```

<span data-ttu-id="f11fb-185">Você ainda verá quaisquer avisos de análise de código, mas eles não interromperão sua compilação.</span><span class="sxs-lookup"><span data-stu-id="f11fb-185">You'll still see any code analysis warnings, but they won't break your build.</span></span>

### <a name="latest-updates"></a><span data-ttu-id="f11fb-186">Atualizações mais recentes</span><span class="sxs-lookup"><span data-stu-id="f11fb-186">Latest updates</span></span>

<span data-ttu-id="f11fb-187">Por padrão, você obterá as regras de análise de código mais recentes e as severidades de regra padrão ao atualizar para versões mais recentes do SDK do .NET.</span><span class="sxs-lookup"><span data-stu-id="f11fb-187">By default, you'll get the latest code analysis rules and default rule severities as you upgrade to newer versions of the .NET SDK.</span></span> <span data-ttu-id="f11fb-188">Se você não quiser esse comportamento, por exemplo, se quiser garantir que nenhuma regra nova seja habilitada ou desabilitada, você poderá substituí-la de uma das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="f11fb-188">If you don't want this behavior, for example, if you want to ensure that no new rules are enabled or disabled, you can override it in one of the following ways:</span></span>

- <span data-ttu-id="f11fb-189">Defina a `AnalysisLevel` Propriedade MSBuild com um valor específico para bloquear os avisos para esse conjunto.</span><span class="sxs-lookup"><span data-stu-id="f11fb-189">Set the `AnalysisLevel` MSBuild property to a specific value to lock the warnings to that set.</span></span> <span data-ttu-id="f11fb-190">Ao atualizar para um SDK mais recente, você ainda obterá correções de bug para esses avisos, mas nenhum aviso novo será habilitado e nenhum aviso existente será desabilitado.</span><span class="sxs-lookup"><span data-stu-id="f11fb-190">When you upgrade to a newer SDK, you'll still get bug fixes for those warnings, but no new warnings will be enabled and no existing warnings will be disabled.</span></span> <span data-ttu-id="f11fb-191">Por exemplo, para bloquear o conjunto de regras para as que acompanham a versão 5,0 do SDK do .NET, adicione a seguinte entrada ao arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="f11fb-191">For example, to lock the set of rules to those that ship with version 5.0 of the .NET SDK, add the following entry to your project file.</span></span>

  ```xml
  <PropertyGroup>
    <AnalysisLevel>5.0</AnalysisLevel>
  </PropertyGroup>
  ```

  > [!TIP]
  > <span data-ttu-id="f11fb-192">O valor padrão da `AnalysisLevel` propriedade é `latest` , o que significa que você sempre Obtém as últimas regras de análise de código à medida que passa para versões mais recentes do SDK do .net.</span><span class="sxs-lookup"><span data-stu-id="f11fb-192">The default value for the `AnalysisLevel` property is `latest`, which means you always get the latest code analysis rules as you move to newer versions of the .NET SDK.</span></span>

  <span data-ttu-id="f11fb-193">Para obter mais informações e ver uma lista de possíveis valores, consulte [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span><span class="sxs-lookup"><span data-stu-id="f11fb-193">For more information, and to see a list of possible values, see [AnalysisLevel](../../core/project-sdk/msbuild-props.md#analysislevel).</span></span>

- <span data-ttu-id="f11fb-194">Instale o [pacote NuGet Microsoft. CodeAnalysis. Netanalyzers](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) para desassociar atualizações de regra das atualizações do SDK do .net.</span><span class="sxs-lookup"><span data-stu-id="f11fb-194">Install the [Microsoft.CodeAnalysis.NetAnalyzers NuGet package](https://github.com/dotnet/roslyn-analyzers#microsoftcodeanalysisnetanalyzers) to decouple rule updates from .NET SDK updates.</span></span> <span data-ttu-id="f11fb-195">A instalação do pacote desativa os analisadores internos do SDK e gera um aviso de compilação se o SDK contiver uma versão de assembly do analisador mais recente do que a do pacote NuGet.</span><span class="sxs-lookup"><span data-stu-id="f11fb-195">Installing the package turns off the built-in SDK analyzers and generates a build warning if the SDK contains a newer analyzer assembly version than that of the NuGet package.</span></span>

## <a name="code-style-analysis"></a><span data-ttu-id="f11fb-196">Análise de estilo de código</span><span class="sxs-lookup"><span data-stu-id="f11fb-196">Code style analysis</span></span>

<span data-ttu-id="f11fb-197">As regras de *análise de estilo de código* ("IDExxxx") permitem que você defina e mantenha o estilo de código consistente em sua codebase.</span><span class="sxs-lookup"><span data-stu-id="f11fb-197">*Code style analysis* ("IDExxxx") rules enable you to define and maintain consistent code style in your codebase.</span></span> <span data-ttu-id="f11fb-198">As configurações de habilitação padrão são:</span><span class="sxs-lookup"><span data-stu-id="f11fb-198">The default enablement settings are:</span></span>

- <span data-ttu-id="f11fb-199">Compilação de linha de comando: a análise de estilo de código está desabilitada, por padrão, para todos os projetos .NET em compilações de linha de comando.</span><span class="sxs-lookup"><span data-stu-id="f11fb-199">Command line build: Code style analysis is disabled, by default, for all .NET projects on command-line builds.</span></span>
- <span data-ttu-id="f11fb-200">Visual Studio: a análise de estilo de código está habilitada, por padrão, para todos os projetos .NET dentro do Visual Studio como [ações rápidas de refatoração de código](/visualstudio/ide/code-generation-in-visual-studio).</span><span class="sxs-lookup"><span data-stu-id="f11fb-200">Visual Studio: Code style analysis is enabled, by default, for all .NET projects inside Visual Studio as [code refactoring quick actions](/visualstudio/ide/code-generation-in-visual-studio).</span></span>

<span data-ttu-id="f11fb-201">Iniciando o .NET 5,0, você pode habilitar a análise do estilo de código no Build, tanto na linha de comando quanto no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f11fb-201">Starting .NET 5.0, you can enable code style analysis on build, both at the command line and inside Visual Studio.</span></span> <span data-ttu-id="f11fb-202">Violações de estilo de código aparecem como avisos ou erros com um prefixo "IDE".</span><span class="sxs-lookup"><span data-stu-id="f11fb-202">Code style violations appear as warnings or errors with an "IDE" prefix.</span></span> <span data-ttu-id="f11fb-203">Isso permite que você imponha estilos de código consistentes no momento da compilação.</span><span class="sxs-lookup"><span data-stu-id="f11fb-203">This enables you to enforce consistent code styles at build time.</span></span>

<span data-ttu-id="f11fb-204">Para obter uma lista completa de regras de análise de estilo de código, consulte [regras de estilo de código](style-rules/index.md).</span><span class="sxs-lookup"><span data-stu-id="f11fb-204">For a full list of code-style analysis rules, see [Code style rules](style-rules/index.md).</span></span>

> [!NOTE]
> <span data-ttu-id="f11fb-205">O recurso de análise de estilo de código é experimental e pode mudar entre as versões do .NET 5 e do .NET 6.</span><span class="sxs-lookup"><span data-stu-id="f11fb-205">The code style analysis feature is experimental and may change between the .NET 5 and .NET 6 releases.</span></span>

<span data-ttu-id="f11fb-206">Etapas para habilitar a análise do estilo de código na compilação:</span><span class="sxs-lookup"><span data-stu-id="f11fb-206">Steps to enable code style analysis on build:</span></span>

1. <span data-ttu-id="f11fb-207">Defina a propriedade [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) do MSBuild como `true` .</span><span class="sxs-lookup"><span data-stu-id="f11fb-207">Set the MSBuild property [EnforceCodeStyleInBuild](../../core/project-sdk/msbuild-props.md#enforcecodestyleinbuild) to `true`.</span></span>

1. <span data-ttu-id="f11fb-208">Em um arquivo *. editorconfig* , [Configure](configuration-options.md) cada regra de estilo de código "IDE" que você deseja executar na compilação como um aviso ou um erro.</span><span class="sxs-lookup"><span data-stu-id="f11fb-208">In an *.editorconfig* file, [configure](configuration-options.md) each "IDE" code style rule that you wish to run on build as a warning or an error.</span></span> <span data-ttu-id="f11fb-209">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="f11fb-209">For example:</span></span>

   ```ini
   [*.{cs,vb}]
   # IDE0040: Accessibility modifiers required (escalated to a build warning)
   dotnet_diagnostic.IDE0040.severity = warning
   ```

   <span data-ttu-id="f11fb-210">Como alternativa, você pode configurar a categoria "estilo" inteira para ser um aviso ou erro, por padrão, e, em seguida, desativar seletivamente as regras que você não deseja executar na compilação.</span><span class="sxs-lookup"><span data-stu-id="f11fb-210">Alternatively, you can configure the entire "Style" category to be a warning or error, by default, and then selectively turn off rules that you don't want to run on build.</span></span> <span data-ttu-id="f11fb-211">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="f11fb-211">For example:</span></span>

   ```ini
   [*.{cs,vb}]

   # Default severity for analyzer diagnostics with category 'Style' (escalated to build warnings)
   dotnet_analyzer_diagnostic.category-Style.severity = warning

   # IDE0040: Accessibility modifiers required (disabled on build)
   dotnet_diagnostic.IDE0040.severity = silent
   ```

## <a name="suppress-a-warning"></a><span data-ttu-id="f11fb-212">Suprimir um aviso</span><span class="sxs-lookup"><span data-stu-id="f11fb-212">Suppress a warning</span></span>

<span data-ttu-id="f11fb-213">Para suprimir uma violação de regra, defina a opção de severidade para essa ID de regra como `none` em um arquivo EditorConfig.</span><span class="sxs-lookup"><span data-stu-id="f11fb-213">To suppress a rule violation, set the severity option for that rule ID to `none` in an EditorConfig file.</span></span> <span data-ttu-id="f11fb-214">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="f11fb-214">For example:</span></span>

```ini
dotnet_diagnostic.CA1822.severity = none
```

<span data-ttu-id="f11fb-215">O Visual Studio fornece maneiras adicionais de suprimir avisos das regras de análise de código.</span><span class="sxs-lookup"><span data-stu-id="f11fb-215">Visual Studio provides additional ways to suppress warnings from code analysis rules.</span></span> <span data-ttu-id="f11fb-216">Para obter mais informações, consulte [suprimir violações](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span><span class="sxs-lookup"><span data-stu-id="f11fb-216">For more information, see [Suppress violations](/visualstudio/code-quality/use-roslyn-analyzers#suppress-violations).</span></span>

<span data-ttu-id="f11fb-217">Para obter mais informações sobre severidades de regra, consulte [Configurar a severidade da regra](configuration-options.md#severity-level).</span><span class="sxs-lookup"><span data-stu-id="f11fb-217">For more information about rule severities, see [Configure rule severity](configuration-options.md#severity-level).</span></span>

## <a name="third-party-analyzers"></a><span data-ttu-id="f11fb-218">Analisadores de terceiros</span><span class="sxs-lookup"><span data-stu-id="f11fb-218">Third-party analyzers</span></span>

<span data-ttu-id="f11fb-219">Além dos analisadores .NET oficiais, você também pode instalar analisadores de terceiros, como [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [analisadores de xUnit](https://www.nuget.org/packages/xunit.analyzers/)e o [analisador de sonar](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span><span class="sxs-lookup"><span data-stu-id="f11fb-219">In addition to the official .NET analyzers, you can also install third party analyzers, such as [StyleCop](https://www.nuget.org/packages/StyleCop.Analyzers/), [Roslynator](https://www.nuget.org/packages/Roslynator.Analyzers/), [XUnit Analyzers](https://www.nuget.org/packages/xunit.analyzers/), and [Sonar Analyzer](https://www.nuget.org/packages/SonarAnalyzer.CSharp/).</span></span>

## <a name="see-also"></a><span data-ttu-id="f11fb-220">Confira também</span><span class="sxs-lookup"><span data-stu-id="f11fb-220">See also</span></span>

- [<span data-ttu-id="f11fb-221">Referência da regra de análise de qualidade de código</span><span class="sxs-lookup"><span data-stu-id="f11fb-221">Code quality analysis rule reference</span></span>](quality-rules/index.md)
- [<span data-ttu-id="f11fb-222">Referência da regra de análise de estilo de código</span><span class="sxs-lookup"><span data-stu-id="f11fb-222">Code style analysis rule reference</span></span>](style-rules/index.md)
- [<span data-ttu-id="f11fb-223">Análise de código no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f11fb-223">Code analysis in Visual Studio</span></span>](/visualstudio/code-quality/roslyn-analyzers-overview)
- [<span data-ttu-id="f11fb-224">SDK da Plataforma do Compilador .NET</span><span class="sxs-lookup"><span data-stu-id="f11fb-224">.NET Compiler Platform SDK</span></span>](../../csharp/roslyn-sdk/index.md)
- [<span data-ttu-id="f11fb-225">Tutorial: escrever seu primeiro analisador e correção de código</span><span class="sxs-lookup"><span data-stu-id="f11fb-225">Tutorial: Write your first analyzer and code fix</span></span>](../../csharp/roslyn-sdk/tutorials/how-to-write-csharp-analyzer-code-fix.md)
