---
title: Configuração no .NET
description: Saiba como usar a API de configuração para configurar aplicativos .NET.
author: IEvangelist
ms.author: dapine
ms.date: 09/16/2020
ms.topic: overview
ms.openlocfilehash: 5955e46c2f5acb6776ada4e3fd6a65507d3faa1f
ms.sourcegitcommit: ecd9e9bb2225eb76f819722ea8b24988fe46f34c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/05/2020
ms.locfileid: "96740120"
---
# <a name="configuration-in-net"></a><span data-ttu-id="c914f-103">Configuração no .NET</span><span class="sxs-lookup"><span data-stu-id="c914f-103">Configuration in .NET</span></span>

<span data-ttu-id="c914f-104">A configuração no .NET é executada usando um ou mais [provedores de configuração](#configuration-providers).</span><span class="sxs-lookup"><span data-stu-id="c914f-104">Configuration in .NET is performed using one or more [configuration providers](#configuration-providers).</span></span> <span data-ttu-id="c914f-105">Os provedores de configuração lêem dados de configuração de pares chave-valor usando uma variedade de fontes de configuração:</span><span class="sxs-lookup"><span data-stu-id="c914f-105">Configuration providers read configuration data from key-value pairs using a variety of configuration sources:</span></span>

- <span data-ttu-id="c914f-106">Arquivos de configurações, como *appsettings.jsem*</span><span class="sxs-lookup"><span data-stu-id="c914f-106">Settings files, such as *appsettings.json*</span></span>
- <span data-ttu-id="c914f-107">Variáveis de ambiente</span><span class="sxs-lookup"><span data-stu-id="c914f-107">Environment variables</span></span>
- [<span data-ttu-id="c914f-108">Cofre da Chave do Azure</span><span class="sxs-lookup"><span data-stu-id="c914f-108">Azure Key Vault</span></span>](/azure/key-vault/general/overview)
- [<span data-ttu-id="c914f-109">Configuração de Aplicativos do Azure</span><span class="sxs-lookup"><span data-stu-id="c914f-109">Azure App Configuration</span></span>](/azure/azure-app-configuration/overview)
- <span data-ttu-id="c914f-110">Argumentos de linha de comando</span><span class="sxs-lookup"><span data-stu-id="c914f-110">Command-line arguments</span></span>
- <span data-ttu-id="c914f-111">Provedores personalizados, instalados ou criados</span><span class="sxs-lookup"><span data-stu-id="c914f-111">Custom providers, installed or created</span></span>
- <span data-ttu-id="c914f-112">Arquivos de diretório</span><span class="sxs-lookup"><span data-stu-id="c914f-112">Directory files</span></span>
- <span data-ttu-id="c914f-113">Objetos do .NET na memória</span><span class="sxs-lookup"><span data-stu-id="c914f-113">In-memory .NET objects</span></span>

## <a name="configure-console-apps"></a><span data-ttu-id="c914f-114">Configurar aplicativos de console</span><span class="sxs-lookup"><span data-stu-id="c914f-114">Configure console apps</span></span>

<span data-ttu-id="c914f-115">Os novos aplicativos de console .NET criados usando [dotnet novo](../tools/dotnet-new.md) ou Visual Studio, por padrão, *não* expõem recursos de configuração.</span><span class="sxs-lookup"><span data-stu-id="c914f-115">New .NET console applications created using [dotnet new](../tools/dotnet-new.md) or Visual Studio by default *do not* expose configuration capabilities.</span></span> <span data-ttu-id="c914f-116">Para adicionar a configuração em um novo aplicativo de console .NET, [adicione uma referência de pacote](../tools/dotnet-add-package.md) a `Microsoft.Extensions.Hosting` .</span><span class="sxs-lookup"><span data-stu-id="c914f-116">To add configuration in a new .NET console application, [add a package reference](../tools/dotnet-add-package.md) to `Microsoft.Extensions.Hosting`.</span></span> <span data-ttu-id="c914f-117">Modifique o arquivo *Program.cs* para corresponder ao seguinte código:</span><span class="sxs-lookup"><span data-stu-id="c914f-117">Modify the *Program.cs* file to match the following code:</span></span>

:::code language="csharp" source="snippets/configuration/console/Program.cs" highlight="18":::

<span data-ttu-id="c914f-118">O <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder(System.String[])?displayProperty=nameWithType> método fornece a configuração padrão para o aplicativo na seguinte ordem:</span><span class="sxs-lookup"><span data-stu-id="c914f-118">The <xref:Microsoft.Extensions.Hosting.Host.CreateDefaultBuilder(System.String[])?displayProperty=nameWithType> method provides default configuration for the app in the following order:</span></span>

1. <span data-ttu-id="c914f-119">[ChainedConfigurationProvider](xref:Microsoft.Extensions.Configuration.ChainedConfigurationSource) : Adiciona um existente `IConfiguration` como uma origem.</span><span class="sxs-lookup"><span data-stu-id="c914f-119">[ChainedConfigurationProvider](xref:Microsoft.Extensions.Configuration.ChainedConfigurationSource) : Adds an existing `IConfiguration` as a source.</span></span>
1. <span data-ttu-id="c914f-120">*appsettings.js* usando o [provedor de configuração JSON](configuration-providers.md#file-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="c914f-120">*appsettings.json* using the [JSON configuration provider](configuration-providers.md#file-configuration-provider).</span></span>
1. <span data-ttu-id="c914f-121">*appSettings.* `Environment` *. JSON* usando o [provedor de configuração JSON](configuration-providers.md#file-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="c914f-121">*appsettings.*`Environment`*.json* using the [JSON configuration provider](configuration-providers.md#file-configuration-provider).</span></span> <span data-ttu-id="c914f-122">Por exemplo, *appSettings*. ***Produção \* \* _._json* e *appSettings*. \* \* \* desenvolvimento** _._json \*.</span><span class="sxs-lookup"><span data-stu-id="c914f-122">For example, *appsettings*.***Production\*\*_._json* and *appsettings*.\*\*\*Development** _._json\*.</span></span>
1. <span data-ttu-id="c914f-123">Segredos do aplicativo quando o aplicativo é executado no `Development` ambiente.</span><span class="sxs-lookup"><span data-stu-id="c914f-123">App secrets when the app runs in the `Development` environment.</span></span>
1. <span data-ttu-id="c914f-124">Variáveis de ambiente usando o [provedor de configuração de variáveis de ambiente](configuration-providers.md#environment-variable-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="c914f-124">Environment variables using the [Environment Variables configuration provider](configuration-providers.md#environment-variable-configuration-provider).</span></span>
1. <span data-ttu-id="c914f-125">Argumentos de linha de comando usando o [provedor de configuração de linha de comando](configuration-providers.md#command-line-configuration-provider).</span><span class="sxs-lookup"><span data-stu-id="c914f-125">Command-line arguments using the [Command-line configuration provider](configuration-providers.md#command-line-configuration-provider).</span></span>

<span data-ttu-id="c914f-126">Os provedores de configuração adicionados posteriormente substituem as configurações de chave anteriores.</span><span class="sxs-lookup"><span data-stu-id="c914f-126">Configuration providers that are added later override previous key settings.</span></span> <span data-ttu-id="c914f-127">Por exemplo, se `SomeKey` for definido tanto no *appsettings.jsquanto no* ambiente, o valor do ambiente será usado.</span><span class="sxs-lookup"><span data-stu-id="c914f-127">For example, if `SomeKey` is set in both *appsettings.json* and the environment, the environment value is used.</span></span> <span data-ttu-id="c914f-128">Usando os provedores de configuração padrão, o [provedor de configuração de linha de comando](configuration-providers.md#command-line-configuration-provider) substitui todos os outros provedores.</span><span class="sxs-lookup"><span data-stu-id="c914f-128">Using the default configuration providers, the [Command-line configuration provider](configuration-providers.md#command-line-configuration-provider) overrides all other providers.</span></span>

### <a name="binding"></a><span data-ttu-id="c914f-129">Associação</span><span class="sxs-lookup"><span data-stu-id="c914f-129">Binding</span></span>

<span data-ttu-id="c914f-130">Uma das principais vantagens da configuração no .NET é a capacidade de associar valores de configuração a instâncias de objetos .NET.</span><span class="sxs-lookup"><span data-stu-id="c914f-130">One of the key advantages to configuration in .NET is the ability to bind configuration values to instances of .NET objects.</span></span> <span data-ttu-id="c914f-131">Por exemplo, o provedor de configuração JSON pode ser usado para mapear *appsettings.jsem* arquivos para objetos .net e é usado com injeção de dependência.</span><span class="sxs-lookup"><span data-stu-id="c914f-131">For example, the JSON configuration provider can be used to map *appsettings.json* files to .NET objects and is used with dependency injection.</span></span> <span data-ttu-id="c914f-132">Isso habilita o padrão de opções, o padrão de opções usa classes para fornecer acesso com rigidez de tipos a grupos de configurações relacionadas.</span><span class="sxs-lookup"><span data-stu-id="c914f-132">This enables the options pattern, the options pattern uses classes to provide strongly typed access to groups of related settings.</span></span>

## <a name="configuration-providers"></a><span data-ttu-id="c914f-133">Provedores de configuração</span><span class="sxs-lookup"><span data-stu-id="c914f-133">Configuration providers</span></span>

<span data-ttu-id="c914f-134">A tabela a seguir mostra os provedores de configuração disponíveis para aplicativos .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c914f-134">The following table shows the configuration providers available to .NET Core apps.</span></span>

| <span data-ttu-id="c914f-135">Provedor</span><span class="sxs-lookup"><span data-stu-id="c914f-135">Provider</span></span>                                                                                                               | <span data-ttu-id="c914f-136">Fornece a configuração de </span><span class="sxs-lookup"><span data-stu-id="c914f-136">Provides configuration from</span></span>        |
|------------------------------------------------------------------------------------------------------------------------|------------------------------------|
| [<span data-ttu-id="c914f-137">Provedor de configuração de Azure App</span><span class="sxs-lookup"><span data-stu-id="c914f-137">Azure App configuration provider</span></span>](/azure/azure-app-configuration/quickstart-aspnet-core-app)                          | <span data-ttu-id="c914f-138">Configuração de Aplicativo do Azure</span><span class="sxs-lookup"><span data-stu-id="c914f-138">Azure App Configuration</span></span>            |
| [<span data-ttu-id="c914f-139">Provedor de configuração de Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="c914f-139">Azure Key Vault configuration provider</span></span>](/azure/key-vault/general/tutorial-net-virtual-machine)                        | <span data-ttu-id="c914f-140">Cofre de Chave do Azure</span><span class="sxs-lookup"><span data-stu-id="c914f-140">Azure Key Vault</span></span>                    |
| [<span data-ttu-id="c914f-141">Provedor de configuração de linha de comando</span><span class="sxs-lookup"><span data-stu-id="c914f-141">Command-line configuration provider</span></span>](configuration-providers.md#command-line-configuration-provider)                  | <span data-ttu-id="c914f-142">Parâmetros de linha de comando</span><span class="sxs-lookup"><span data-stu-id="c914f-142">Command-line parameters</span></span>            |
| [<span data-ttu-id="c914f-143">Provedor de Configuração personalizado</span><span class="sxs-lookup"><span data-stu-id="c914f-143">Custom configuration provider</span></span>](custom-configuration-provider.md)                                                      | <span data-ttu-id="c914f-144">Fonte personalizada</span><span class="sxs-lookup"><span data-stu-id="c914f-144">Custom source</span></span>                      |
| [<span data-ttu-id="c914f-145">Provedor de configuração de variáveis de ambiente</span><span class="sxs-lookup"><span data-stu-id="c914f-145">Environment Variables configuration provider</span></span>](configuration-providers.md#environment-variable-configuration-provider) | <span data-ttu-id="c914f-146">Variáveis de ambiente</span><span class="sxs-lookup"><span data-stu-id="c914f-146">Environment variables</span></span>              |
| [<span data-ttu-id="c914f-147">Provedor de configuração de arquivo</span><span class="sxs-lookup"><span data-stu-id="c914f-147">File configuration provider</span></span>](configuration-providers.md#file-configuration-provider)                                  | <span data-ttu-id="c914f-148">Arquivos JSON, XML e INI</span><span class="sxs-lookup"><span data-stu-id="c914f-148">JSON, XML, and INI files</span></span>           |
| [<span data-ttu-id="c914f-149">Provedor de configuração de chave por arquivo</span><span class="sxs-lookup"><span data-stu-id="c914f-149">Key-per-file configuration provider</span></span>](configuration-providers.md#key-per-file-configuration-provider)                  | <span data-ttu-id="c914f-150">Arquivos de diretório</span><span class="sxs-lookup"><span data-stu-id="c914f-150">Directory files</span></span>                    |
| [<span data-ttu-id="c914f-151">Provedor de configuração de memória</span><span class="sxs-lookup"><span data-stu-id="c914f-151">Memory configuration provider</span></span>](configuration-providers.md#memory-configuration-provider)                              | <span data-ttu-id="c914f-152">Coleções na memória</span><span class="sxs-lookup"><span data-stu-id="c914f-152">In-memory collections</span></span>              |
| [<span data-ttu-id="c914f-153">Segredos do aplicativo (Gerenciador de segredo)</span><span class="sxs-lookup"><span data-stu-id="c914f-153">App secrets (Secret Manager)</span></span>](/aspnet/core/security/app-secrets)                                                      | <span data-ttu-id="c914f-154">Arquivo no diretório de perfil do usuário</span><span class="sxs-lookup"><span data-stu-id="c914f-154">File in the user profile directory</span></span> |

<span data-ttu-id="c914f-155">Para obter mais informações sobre vários provedores de configuração, consulte [provedores de configuração no .net](configuration-providers.md).</span><span class="sxs-lookup"><span data-stu-id="c914f-155">For more information on various configuration providers, see [Configuration providers in .NET](configuration-providers.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="c914f-156">Confira também</span><span class="sxs-lookup"><span data-stu-id="c914f-156">See also</span></span>

- [<span data-ttu-id="c914f-157">Provedores de configuração no .NET</span><span class="sxs-lookup"><span data-stu-id="c914f-157">Configuration providers in .NET</span></span>](configuration-providers.md)
- [<span data-ttu-id="c914f-158">Implementar um provedor de configuração personalizado</span><span class="sxs-lookup"><span data-stu-id="c914f-158">Implement a custom configuration provider</span></span>](custom-configuration-provider.md)
- <span data-ttu-id="c914f-159">Os bugs de configuração devem ser criados no repositório [github.com/dotnet/Extensions](https://github.com/dotnet/extensions/issues)</span><span class="sxs-lookup"><span data-stu-id="c914f-159">Configuration bugs should be created in the [github.com/dotnet/extensions](https://github.com/dotnet/extensions/issues) repo</span></span>
